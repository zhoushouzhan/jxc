import{a as g,r as v,w as K,o as P,d as n,e as i,i as t,t as m,v as $,f as h,N as j,K as F,F as M,q as R,l as _,a3 as T,g as x,b as w}from"./index-ffc5c309.js";const q={key:0},E={class:"flex space-x-2"},O=["textContent"],S={key:0,class:"absolute left-0 top-0 w-full h-full bg-black bg-opacity-60 flex justify-center"},U={class:"bg-white w-1/2 mt-52 max-h-[770px] rounded overflow-hidden"},z={class:"flex justify-between border-b bg-gray-50"},A=t("div",{class:"p-3 font-bold"},"选择数据",-1),G=t("i",{class:"ri ri-close-line ri-xl hover:text-red-500"},null,-1),H=[G],I={class:"flex items-center space-x-2 p-5"},J={class:"max-h-[600px] p-5 overflow-hidden overflow-y-auto"},Q={class:"grid grid-cols-3 gap-5"},W=["onClick"],X={key:0,class:"mt-3"},te={__name:"yplist",props:{modelValue:{default:0},id:{default:0},controller:{default:""},colkey:{default:"title"}},emits:["update:modelValue"],setup(b,{emit:k}){const c=b,C=k,f=g(!1),d=g(!1),r=g("请选择"),o=v({keyword:"",page:0}),s=v({totalRecords:0,pageCount:0,currentPage:1}),V=e=>{s.currentPage=e,o.page=e,p()},u=v([]),D=e=>{C("update:modelValue",e.id),r.value=e.title,d.value=!1};K(d,async(e,a)=>{e&&(o.page=0,await p())});const p=async()=>{const e=await x(c.controller+"/index",o);e.code==1&&(s.currentPage=e.data.current_page,s.pageCount=e.data.last_page,s.totalRecords=e.data.total,u.length=0,Object.keys(e.data.data).map(a=>{u.push({id:e.data.data[a].id,title:e.data.data[a].title})}))},y=async()=>{o.page=0,await p()},B=async e=>{const a=await x(c.controller+"/read",{id:e});a.code&&(r.value=a.data.title)};return P(async()=>{c.modelValue&&await B(c.modelValue),f.value=!0}),(e,a)=>{const L=w("ypinput"),N=w("yppage");return f.value?(n(),i("div",q,[t("div",E,[t("div",{onClick:a[0]||(a[0]=l=>d.value=!0)},[t("div",{class:"border rounded h-8 w-32 flex items-center px-2 text-blue-600",textContent:m(r.value)},null,8,O)])]),(n(),$(T,{to:"body"},[d.value?(n(),i("div",S,[t("div",U,[t("div",z,[A,t("div",{class:"p-3",onClick:a[1]||(a[1]=l=>d.value=!1)},H)]),t("div",I,[t("div",null,[h(L,{modelValue:o.keyword,"onUpdate:modelValue":a[2]||(a[2]=l=>o.keyword=l),placeholder:"关键词",onKeyup:j(y,["enter"])},null,8,["modelValue"])]),t("div",null,[t("button",{class:"yp-button rounded",onClick:F(y,["stop"])},"查询")])]),t("div",J,[t("div",Q,[(n(!0),i(M,null,R(u,(l,Y)=>(n(),i("div",{class:"text-center p-2 bg-gray-50 text-gray-700 hover:bg-blue-50",onClick:Z=>D(l)},m(l.title),9,W))),256))])]),s.pageCount>1?(n(),i("div",X,[h(N,{onTopage:V,pageData:s},null,8,["pageData"])])):_("",!0)])])):_("",!0)]))])):_("",!0)}}};export{te as default};
