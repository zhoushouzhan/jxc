import{r as I,a as f,o as N,g as v,b as p,d as i,e as m,i as e,f as d,t as B,F as x,q as C,j as D,M as j,v as E,l as F,k as h,E as L,y as M}from"./index-0f467f6d.js";const S={class:"text-sm text-gray-800"},T={class:"bg-white select-none p-2 space-y-3"},q={class:"flex items-center"},O=e("div",{class:"w-24 text-right pr-5"},"账号",-1),z={class:"flex-1"},A={class:"flex items-center"},G=e("div",{class:"w-24 text-right pr-5"},"密码",-1),H={class:"flex-1"},J={class:"flex items-center"},K=e("div",{class:"w-24 text-right pr-5"},"重复密码",-1),P={class:"flex-1"},Q={class:"flex items-center"},R=e("div",{class:"w-24 text-right pr-5"},"姓名",-1),W={class:"flex-1"},X={class:"flex items-center"},Y=e("div",{class:"w-24 text-right pr-5"},"手机",-1),Z={class:"flex-1"},$={class:"flex items-center"},ee=e("div",{class:"w-24 text-right pr-5"},"状态",-1),se={class:"flex-1 flex items-center"},te={class:"px-2 text-red-500 font-bold"},oe={class:"flex items-center"},le=e("div",{class:"w-24 text-right pr-5"},"角色",-1),ae={class:"flex-1 flex items-center"},de=e("i",{class:"ri-save-line ri-lg pr-1"},null,-1),ne=e("i",{class:"ri-format-clear ri-lg pr-1"},null,-1),re={__name:"form",props:{adminId:Number},emits:["update"],setup(y,{emit:V}){const n=y,g=V,s=I({username:"",password:"",confirm_password:"",truename:"",mobile:"",status:"",roles_id:[],lockedmsg:""}),r=f("6-18位英文字符"),u=f(""),w=async()=>{const a=await L("/admin/save",s);a.code&&(M({type:"alter-success",text:a.msg}),n.adminId||setTimeout(_(),1e3),g("update"))},_=()=>{for(let a in s)s[a]=""};return N(async()=>{const a=await v("/roles/index");if(u.value=a.data,n.adminId){s.id=n.adminId;const t=await v("/admin/getadmin",{id:n.adminId});t.code==1&&(r.value="不改不填写,6-18位英文字符",Object.keys(s).map(l=>{l=="roles_id"?t.data.roles.map(c=>{s[l].push(c.id)}):s[l]=t.data[l]}))}}),(a,t)=>{const l=p("ypinput"),c=p("ypswitch"),b=p("ypcheckbox");return i(),m("div",S,[e("div",T,[e("div",q,[O,e("div",z,[d(l,{modelValue:s.username,"onUpdate:modelValue":t[0]||(t[0]=o=>s.username=o),placeholder:"5-15位字母+数字"},null,8,["modelValue"])])]),e("div",A,[G,e("div",H,[d(l,{modelValue:s.password,"onUpdate:modelValue":t[1]||(t[1]=o=>s.password=o),type:"password",placeholder:r.value},null,8,["modelValue","placeholder"])])]),e("div",J,[K,e("div",P,[d(l,{modelValue:s.confirm_password,"onUpdate:modelValue":t[2]||(t[2]=o=>s.confirm_password=o),type:"password",placeholder:r.value},null,8,["modelValue","placeholder"])])]),e("div",Q,[R,e("div",W,[d(l,{modelValue:s.truename,"onUpdate:modelValue":t[3]||(t[3]=o=>s.truename=o),placeholder:"最多32位字符"},null,8,["modelValue"])])]),e("div",X,[Y,e("div",Z,[d(l,{modelValue:s.mobile,"onUpdate:modelValue":t[4]||(t[4]=o=>s.mobile=o),type:"tel",placeholder:"最多32位字符"},null,8,["modelValue"])])]),e("div",$,[ee,e("div",se,[d(c,{modelValue:s.status,"onUpdate:modelValue":t[5]||(t[5]=o=>s.status=o)},null,8,["modelValue"]),e("div",te,B(s.lockedmsg),1)])]),e("div",oe,[le,e("div",ae,[(i(!0),m(x,null,C(u.value,(o,k)=>(i(),m(x,{key:k},[o.id>=D(j).state.Sys.sysinfo.admin.maxroles?(i(),E(b,{key:0,title:o.title,value:o.id,modelValue:s.roles_id,"onUpdate:modelValue":t[6]||(t[6]=U=>s.roles_id=U)},null,8,["title","value","modelValue"])):F("",!0)],64))),128))])])]),e("div",{class:"flex justify-center py-3 space-x-2"},[e("button",{class:"yp-button yp-button-orange rounded",type:"button",onClick:w},[de,h(" 保存 ")]),e("button",{class:"yp-button yp-button-gray rounded",type:"button",onClick:_},[ne,h(" 重置 ")])])])}}};export{re as default};
