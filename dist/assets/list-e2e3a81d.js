import{a as E,r as u,w as I,o as M,b as y,c as U,d as l,v as $,h as v,i as t,m as b,f as _,e as r,F as k,q as w,t as m,k as q,l as F,g as H,y as C,z as R,E as z}from"./index-0f467f6d.js";const A=t("i",{class:"ri-2x ri-yuque-fill text-gray-500 ml-2"},null,-1),S=["innerHTML"],G=t("div",{class:"flex-1 flex flex-row-reverse space-x-reverse space-x-2"},null,-1),J={class:"table-auto w-full text-sm"},K={class:"bg-gray-100"},O={class:"px-2 py-2 border w-10 font-thin"},Q=t("th",{class:"px-2 py-2 border w-10 text-center"},"ID",-1),W=t("th",{class:"px-2 py-2 border text-left"},"名称",-1),X=t("th",{class:"px-2 py-2 border text-left"},"仓管",-1),Y=t("th",{class:"px-2 py-2 border w-44"},"总计",-1),Z=t("th",{class:"px-2 py-2 border w-32 text-center"},"操作",-1),tt={class:"border px-2"},et={class:"border px-2 text-center"},st={class:"border px-2"},ot={class:"border px-2 space-x-2 text-sm text-white"},at={class:"space-x-2 bg-gray-800 rounded px-1 py-1"},nt={class:"border px-2"},lt={class:"border px-2 py-2 text-center"},rt=["onClick"],dt=["onClick"],ct={class:"border p-2"},it={class:"border p-2",colspan:"6"},pt={key:0,class:"mt-3"},xt={__name:"list",emits:["jumpCom"],setup(ut,{emit:V}){const g=V,D=E(!1),L=()=>{g("jumpCom",{to:"add"})},a=u({totalRecords:0,pageCount:0,currentPage:1}),B=e=>{a.currentPage=e,x()},p=u([]),n=u([]),d=u([]);I(d,(e,s)=>{n.length=0,e.length>0?p.forEach(c=>{n.push(c.id)}):n.length=0});const N=e=>{g("jumpCom",{to:"edit",id:e})},x=async()=>{let e=await H("godown/index",{page:a.currentPage});if(e.code==1){a.currentPage=e.data.current_page,a.pageCount=e.data.last_page,a.totalRecords=e.data.total,p.length=0;for(let s in e.data.data)p[s]=e.data.data[s]}D.value=!0},f=e=>{if(e==0&&(e=n.length?n:0),!e){C({type:"alter-error",text:"请选择项目"});return}R({text:"确认删除吗？"}).then(async()=>{const s=await z("godown/delete",{ids:e});s.code&&(C({type:"alter-success",text:s.msg}),x())}).catch(s=>{})};return M(()=>{x()}),(e,s)=>{const c=y("ypcheckbox"),P=y("yppage"),T=y("yplayout"),h=U("tooltip");return l(),$(T,null,{header:v(o=>[A,t("div",{class:"text-xl px-3",innerHTML:o.meta.title},null,8,S),G,t("button",{class:"yp-button yp-button-sm yp-button-purple rounded-sm",onClick:L},"增加")]),list:v(()=>[t("table",J,[t("thead",K,[t("tr",null,[t("th",O,[b(_(c,{value:"all",modelValue:d,"onUpdate:modelValue":s[0]||(s[0]=o=>d=o)},null,8,["modelValue"]),[[h,"全选",void 0,{top:!0}]])]),Q,W,X,Y,Z])]),t("tbody",null,[(l(!0),r(k,null,w(p,(o,j)=>(l(),r("tr",{class:"hover:bg-gray-100",key:j},[t("td",tt,[_(c,{value:o.id,modelValue:n,"onUpdate:modelValue":s[1]||(s[1]=i=>n=i)},null,8,["value","modelValue"])]),t("td",et,m(o.id),1),t("td",st,m(o.title),1),t("td",ot,[(l(!0),r(k,null,w(o.adminlist,(i,_t)=>(l(),r("span",at,m(i.truename),1))),256))]),t("td",nt,m(o.count),1),t("td",lt,[t("button",{class:"yp-button yp-button-sm rounded-sm mr-2",onClick:i=>N(o.id)},"编辑",8,rt),t("button",{class:"yp-button yp-button-red yp-button-sm rounded-sm",onClick:i=>f(o.id)},"删除",8,dt)])]))),128))]),t("tfoot",null,[t("tr",null,[t("td",ct,[b(_(c,{value:"all",modelValue:d,"onUpdate:modelValue":s[2]||(s[2]=o=>d=o)},null,8,["modelValue"]),[[h,"全选",void 0,{right:!0}]])]),t("td",it,[b((l(),r("button",{class:"yp-button yp-button-red yp-button-sm rounded-sm",onClick:s[3]||(s[3]=o=>f(0))},[q("批量删除")])),[[h,"批量删除",void 0,{bottom:!0}]])])])])]),a.pageCount>1?(l(),r("div",pt,[_(P,{onTopage:B,pageData:a},null,8,["pageData"])])):F("",!0)]),_:1})}}};export{xt as default};
