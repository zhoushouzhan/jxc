import{a as E,r as u,w as I,o as M,b as g,c as U,d as l,v as $,h as v,i as t,m as b,f as _,e as c,F as k,q as C,t as h,k as q,l as F,g as H,y as V,z as R,E as z}from"./index-ddd32adc.js";const A=t("i",{class:"ri-2x ri-yuque-fill text-gray-500 ml-2"},null,-1),S=["innerHTML"],G=t("div",{class:"flex-1 flex flex-row-reverse space-x-reverse space-x-2"},null,-1),J={class:"table-auto w-full text-sm"},K={class:"bg-gray-100"},O={class:"px-2 py-2 border w-10 font-thin"},Q=t("th",{class:"px-2 py-2 border w-10 text-center"},"ID",-1),W=t("th",{class:"px-2 py-2 border text-left"},"名称",-1),X=t("th",{class:"px-2 py-2 border text-left"},"仓管",-1),Y=t("th",{class:"px-2 py-2 border w-44"},"商品数量",-1),Z=t("th",null,"操作",-1),tt={class:"border px-2"},et={class:"border px-2 text-center"},st={class:"border px-2"},ot={class:"border px-2 space-x-2 text-sm"},at={class:"space-x-2"},nt={class:"border px-2 text-center"},lt={class:"border px-2 py-2 text-center space-x-2"},ct=["onClick"],rt=["onClick"],dt={class:"border p-2"},it={class:"border p-2",colspan:"6"},pt={key:0,class:"mt-3"},mt={__name:"list",emits:["jumpCom"],setup(ut,{emit:w}){const y=w,D=E(!1),L=()=>{y("jumpCom",{to:"add"})},a=u({totalRecords:0,pageCount:0,currentPage:1}),B=e=>{a.currentPage=e,m()},p=u([]),n=u([]),r=u([]);I(r,(e,s)=>{n.length=0,e.length>0?p.forEach(d=>{n.push(d.id)}):n.length=0});const N=e=>{y("jumpCom",{to:"edit",id:e})},m=async()=>{let e=await H("godown/index",{page:a.currentPage});if(e.code==1){a.currentPage=e.data.current_page,a.pageCount=e.data.last_page,a.totalRecords=e.data.total,p.length=0;for(let s in e.data.data)p[s]=e.data.data[s]}D.value=!0},f=e=>{if(e==0&&(e=n.length?n:0),!e){V({type:"alter-error",text:"请选择项目"});return}R({text:"确认删除吗？"}).then(async()=>{const s=await z("godown/delete",{ids:e});s.code&&(V({type:"alter-success",text:s.msg}),m())}).catch(s=>{})};return M(()=>{m()}),(e,s)=>{const d=g("ypcheckbox"),P=g("yppage"),T=g("yplayout"),x=U("tooltip");return l(),$(T,null,{header:v(o=>[A,t("div",{class:"text-xl px-3",innerHTML:o.meta.title},null,8,S),G,t("button",{class:"btn btn-chen",onClick:L},"增加")]),list:v(()=>[t("table",J,[t("thead",K,[t("tr",null,[t("th",O,[b(_(d,{value:"all",modelValue:r,"onUpdate:modelValue":s[0]||(s[0]=o=>r=o)},null,8,["modelValue"]),[[x,"全选",void 0,{top:!0}]])]),Q,W,X,Y,Z])]),t("tbody",null,[(l(!0),c(k,null,C(p,(o,j)=>(l(),c("tr",{class:"hover:bg-gray-100",key:j},[t("td",tt,[_(d,{value:o.id,modelValue:n,"onUpdate:modelValue":s[1]||(s[1]=i=>n=i)},null,8,["value","modelValue"])]),t("td",et,h(o.id),1),t("td",st,h(o.title),1),t("td",ot,[(l(!0),c(k,null,C(o.adminlist,(i,_t)=>(l(),c("span",at,h(i.truename),1))),256))]),t("td",nt,h(o.goodsitem_count),1),t("td",lt,[t("button",{class:"btn btn-lan",onClick:i=>N(o.id)},"编辑",8,ct),t("button",{class:"btn btn-hong",onClick:i=>f(o.id)},"删除",8,rt)])]))),128))]),t("tfoot",null,[t("tr",null,[t("td",dt,[b(_(d,{value:"all",modelValue:r,"onUpdate:modelValue":s[2]||(s[2]=o=>r=o)},null,8,["modelValue"]),[[x,"全选",void 0,{right:!0}]])]),t("td",it,[b((l(),c("button",{class:"btn btn-hong",onClick:s[3]||(s[3]=o=>f(0))},[q("批量删除")])),[[x,"批量删除",void 0,{bottom:!0}]])])])])]),a.pageCount>1?(l(),c("div",pt,[_(P,{onTopage:B,pageData:a},null,8,["pageData"])])):F("",!0)]),_:1})}}};export{mt as default};
