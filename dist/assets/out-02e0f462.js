import{a as v,r as x,o as K,b as w,d as n,v as Z,h as f,i as e,e as a,F as k,q as V,t as u,l as c,f as p,N as $,k as C,g as h,E as q,y as z}from"./index-ffc5c309.js";const H=e("i",{class:"ri-2x text-gray-500 ml-2 ri-indent-decrease"},null,-1),S=e("div",{class:"text-xl px-3"},"出库单",-1),T=e("div",{class:"flex-1 flex flex-row-reverse space-x-reverse space-x-2"},null,-1),A={class:"bg-white text-sm"},G={key:0},I=e("div",{class:"text-lg text-center"}," 选择出库仓库 ",-1),J={class:"flex items-center justify-center space-x-5 py-5"},O=["onClick"],P={key:1},Q={key:2},R={class:"yp-table"},W=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"序号"),e("th",null,"名称"),e("th",null,"成本"),e("th",null,"数量"),e("th",null,"库存"),e("th",null,"备注"),e("th",{class:"text-center"},"操作")])],-1),X={class:"text-center"},Y=["onClick"],ee=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-5 h-5 fill-gray-600 hover:fill-red-500"},[e("path",{fill:"none",d:"M0 0h24v24H0z"}),e("path",{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 10.5858L9.17157 7.75736L7.75736 9.17157L10.5858 12L7.75736 14.8284L9.17157 16.2426L12 13.4142L14.8284 16.2426L16.2426 14.8284L13.4142 12L16.2426 9.17157L14.8284 7.75736L12 10.5858Z"})],-1),te=[ee],oe={class:"flex justify-center py-2 space-x-2 mt-3"},le=e("i",{class:"ri-save-line ri-lg pr-1"},null,-1),se=e("i",{class:"ri-arrow-go-back-fill ri-lg pr-1"},null,-1),ae={__name:"out",props:{id:{default:0},t:{default:0}},emits:["jumpCom"],setup(L,{emit:U}){const y=L,j=U,i=v(""),m=x([]),g=v(!1),o=x({godown_id:0,enabled:0,type:2,bill:[]}),b=()=>{j("jumpCom",{to:"list"})},B=async()=>{const t=await h("goodsitem/details",{code:i.value});if(t.code==1){let s={goods_id:t.data.id,title:t.data.title,godown_id:o.godown_id,category_id:t.data.category.id,intro:"",status:0,inprice:0,numbers:0,count:t.data.numbers,code:i.value};o.bill.push(s)}i.value=""},N=t=>{o.splice(t,1)},D=async()=>{const t=await h("/godown/index");if(t.code==1)for(let s in t.data.data)m.push(t.data.data[s])},M=async()=>{const t=await q("kucundan/save",o);t.code==1&&(o.bill.splice(0),z({type:"alter-success",text:t.msg}))},E=async t=>{const s=await h("kucundan/read",{id:t});s.code==1&&(o.id=t,o.godown_id=s.data.godown_id,o.type=s.data.type,o.bill=s.data.bill)};return K(async()=>{y.id?await E(y.id):await D(),g.value=!0}),(t,s)=>{const r=w("ypinput"),F=w("yplayout");return g.value?(n(),Z(F,{key:0},{header:f(()=>[H,S,T,e("button",{class:"yp-button yp-button-sm yp-button-orange rounded-sm",onClick:b},"返回")]),list:f(()=>[e("div",A,[o.godown_id==0?(n(),a("div",G,[I,e("div",J,[(n(!0),a(k,null,V(m,(l,_)=>(n(),a("div",{class:"px-3 py-1.5 cursor-pointer bg-red-500 hover:bg-red-600 text-white rounded",onClick:d=>o.godown_id=l.id},u(l.title),9,O))),256))])])):c("",!0),o.godown_id?(n(),a("div",P,[p(r,{modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=l=>i.value=l),disabled:"",placeholder:"录入条码",onKeyup:$(B,["enter"])},null,8,["modelValue"])])):c("",!0),o.bill.length?(n(),a("div",Q,[e("table",R,[W,e("tbody",null,[(n(!0),a(k,null,V(o.bill,(l,_)=>(n(),a("tr",null,[e("td",X,u(_+1),1),e("td",null,u(l.title),1),e("td",null,[p(r,{modelValue:l.inprice,"onUpdate:modelValue":d=>l.inprice=d,placeholder:"请输入价格"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",null,[p(r,{modelValue:l.numbers,"onUpdate:modelValue":d=>l.numbers=d,placeholder:"请输入数量"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",null,u(l.count),1),e("td",null,[p(r,{modelValue:l.intro,"onUpdate:modelValue":d=>l.intro=d,placeholder:"请输入备注"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",null,[e("div",{class:"flex items-center justify-center",onClick:d=>N(_)},te,8,Y)])]))),256))])])])):c("",!0),e("div",oe,[o.bill.length?(n(),a("button",{key:0,class:"yp-button yp-button-orange rounded",type:"button",onClick:M},[le,C(" 提交 ")])):c("",!0),e("button",{class:"yp-button yp-button-gray rounded",type:"button",onClick:b},[se,C(" 返回 ")])])])]),_:1})):c("",!0)}}};export{ae as default};
