import{u as M,a as U,r as _,o as z,b as u,d as l,v as E,h as v,i as t,n as H,f as p,N as K,e as a,l as d,F as q,q as A,t as i,g as O,z as S,E as G,y as I,A as J}from"./index-0f467f6d.js";const Q={class:"flex items-center"},W=["innerHTML"],X=t("div",{class:"text-gray-400"},"仓库所有商品明细、状态查询",-1),Y={class:"flex space-x-1"},Z={class:"yp-table-datalist"},tt=t("th",null,null,-1),et=t("th",null,"序号",-1),st=t("th",null,"图片",-1),ot=t("th",null,"名称",-1),nt=t("th",null,"类目",-1),lt=t("th",null,"仓库",-1),at=t("th",null,"厂商",-1),dt={class:"flex items-center space-x-1"},it=t("div",null,"成本价",-1),ct={key:0,class:"ri-menu-line text-gray-500"},rt={key:1,class:"ri-sort-desc text-gray-500"},ut={key:2,class:"ri-sort-asc text-gray-500"},_t=t("th",null,"销售价",-1),pt=t("th",null,"条码",-1),ht=t("th",null,"状态",-1),yt=t("th",null,"入库时间",-1),gt=t("th",null,"备注",-1),mt=t("th",null,"操作",-1),xt=t("td",null,null,-1),kt=["src","onClick"],bt={key:0,class:"bg-green-600 text-white px-2 py-1 rounded"},vt={key:1,class:"bg-yellow-600 text-white px-2 py-1 rounded"},ft={key:2,class:"bg-black text-white px-2 py-1 rounded"},wt={key:3,class:"bg-black text-white px-2 py-1 rounded"},Ct={key:0,class:"space-x-2"},Vt=["onClick"],Lt=["onClick"],Tt={key:0},Dt={key:1},Pt={__name:"list",emits:["jumpTo"],setup(Bt,{emit:f}){const w=f,C=M().meta,m=U(!1),c=_({pagelimit:30,totalRecords:0,pageCount:0,currentPage:1}),V=s=>{o.page=s,c.currentPage=s,r()},L=_([{id:0,title:"全部"},{id:1,title:"正常"},{id:2,title:"异常"},{id:3,title:"出售中"},{id:4,title:"己售"}]),o=_({keyword:"",status:null,orderby:"",ordersort:"",page:0}),T=s=>{o.page=0,o.orderby=s,o.ordersort=o.ordersort=="desc"?"asc":"desc",r()},h=_([]),r=async()=>{const s=await O("goodsitem/index",o);s.code==1&&(c.currentPage=s.data.current_page,c.pageCount=s.data.last_page,c.totalRecords=s.data.total,c.pagelimit=s.data.per_page,h.length=0,s.data.data.map((n,y)=>{h.push(n)}))},D=s=>{window.open(s)},x=async()=>{await r()},B=s=>{w("jumpTo",{to:"edit",id:s,page:o.page})},F=async s=>{S({text:"确认删除吗？"}).then(async()=>{const n=await G("goodsitem/delete",{id:s});n.code==1&&(I({type:"alter-success",text:n.msg}),r())}).catch(n=>{})},k=s=>{const n=C.mod.name;return J(n).indexOf(s)>=0};return z(async()=>{await r(),m.value=!0}),(s,n)=>{const y=u("ypinput"),N=u("yplist"),P=u("ypselect"),R=u("yppage"),$=u("yplayout");return m.value?(l(),E($,{key:0},{header:v(g=>[t("div",Q,[t("i",{class:H(["ri-2x text-gray-500 ml-2",g.meta.icon||"ri-information-line"])},null,2),t("div",{class:"text-xl px-2",innerHTML:g.meta.title},null,8,W),X])]),list:v(g=>[t("div",Y,[t("div",null,[p(y,{modelValue:o.keyword,"onUpdate:modelValue":n[0]||(n[0]=e=>o.keyword=e),placeholder:"关键词|条码",onKeyup:K(x,["enter"])},null,8,["modelValue"])]),t("div",null,[p(N,{controller:"factory",modelValue:o.factory_id,"onUpdate:modelValue":n[1]||(n[1]=e=>o.factory_id=e),colkey:"title",defaultTitle:"--选择厂商--"},null,8,["modelValue"])]),t("div",null,[p(P,{modelValue:o.status,"onUpdate:modelValue":n[2]||(n[2]=e=>o.status=e),itemList:L,defaultTitle:"--选择状态--"},null,8,["modelValue","itemList"])]),t("div",null,[t("button",{class:"btn btn-chen",onClick:x},"查询")])]),t("table",Z,[t("thead",null,[t("tr",null,[tt,et,st,ot,nt,lt,at,t("th",null,[t("div",dt,[it,t("div",{class:"cursor-pointer",onClick:n[3]||(n[3]=e=>T("inprice"))},[o.ordersort==""?(l(),a("i",ct)):d("",!0),o.ordersort=="desc"?(l(),a("i",rt)):d("",!0),o.ordersort=="asc"?(l(),a("i",ut)):d("",!0)])])]),_t,pt,ht,yt,gt,mt])]),(l(!0),a(q,null,A(h,(e,j)=>(l(),a("tbody",null,[t("tr",null,[xt,t("td",null,i(j+1),1),t("td",null,[t("img",{src:e.goods.thumbFile,class:"h-28 w-28 object-cover",onClick:b=>D(e.goods.thumbFile)},null,8,kt)]),t("td",null,i(e.title),1),t("td",null,i(e.category.title),1),t("td",null,i(e.godown.title),1),t("td",null,i(e.goods.factory.title),1),t("td",null,"￥"+i(e.inprice),1),t("td",null,"￥"+i(e.sellprice),1),t("td",null,i(e.code),1),t("td",null,[e.status==1?(l(),a("span",bt,"正常")):d("",!0),e.status==2?(l(),a("span",vt,"异常")):d("",!0),e.status==3?(l(),a("span",ft,"出售中")):d("",!0),e.status==4?(l(),a("span",wt,"己售")):d("",!0)]),t("td",null,i(e.create_time),1),t("td",null,i(e.intro),1),t("td",null,[e.status!=4?(l(),a("div",Ct,[k("edit")?(l(),a("button",{key:0,class:"btn btn-lan",onClick:b=>B(e.id)},"编辑",8,Vt)):d("",!0),k("delete")?(l(),a("button",{key:1,class:"btn btn-hong",onClick:b=>F(e.id)},"删除",8,Lt)):d("",!0)])):d("",!0)])])]))),256))]),c.pageCount>1?(l(),a("div",Tt,[p(R,{onTopage:V,pageData:c},null,8,["pageData"])])):(l(),a("div",Dt," 总数："+i(c.totalRecords),1))]),_:1})):d("",!0)}}};export{Pt as default};
