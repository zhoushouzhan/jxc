import{a as v,r as g,w as N,o as P,d as n,e as c,i as t,t as x,m as S,I as $,K as w,v as j,f as b,M as F,F as I,q as R,l as f,S as q,g as k,b as C}from"./index-ddd32adc.js";const E={key:0},O={class:"flex space-x-2"},U={class:"border rounded h-8 w-32 flex items-center px-2 text-blue-600 relative"},z=["textContent"],A={class:"absolute right-0"},G={key:0,class:"absolute left-0 top-0 w-full h-full bg-black bg-opacity-60 flex justify-center"},H={class:"bg-white w-1/2 mt-52 max-h-[770px] rounded overflow-hidden"},J={class:"flex justify-between border-b bg-gray-50"},Q=t("div",{class:"p-3 font-bold"},"选择数据",-1),W=t("i",{class:"ri ri-close-line ri-xl hover:text-red-500"},null,-1),X=[W],Y={class:"flex items-center space-x-2 p-5"},Z={class:"max-h-[600px] p-5 overflow-hidden overflow-y-auto"},ee={class:"grid grid-cols-3 gap-5"},te=["onClick"],ae={key:0,class:"mt-3"},de={__name:"yplist",props:{modelValue:{default:0},id:{default:0},controller:{default:""},colkey:{default:"title"},exclude:{default:null},defaultTitle:{default:"--请选择--"}},emits:["update:modelValue"],setup(_,{emit:V}){const o=_,h=V,m=v(!1),i=v(!1),r=v(o.defaultTitle),s=g({keyword:"",id:o.exclude,page:0}),l=g({totalRecords:0,pageCount:0,currentPage:1}),D=e=>{l.currentPage=e,s.page=e,p()},u=g([]),T=e=>{h("update:modelValue",e.id),r.value=e.title,i.value=!1};N(i,async(e,a)=>{e&&(s.page=0,await p())});const p=async()=>{const e=await k(o.controller+"/index",s);e.code==1&&(l.currentPage=e.data.current_page,l.pageCount=e.data.last_page,l.totalRecords=e.data.total,u.length=0,Object.keys(e.data.data).map(a=>{u.push({id:e.data.data[a].id,title:e.data.data[a].title})}))},y=async()=>{s.page=0,await p()},B=async e=>{const a=await k(o.controller+"/read",{id:e});a.code&&(r.value=a.data.title)},L=()=>{r.value=o.defaultTitle,h("update:modelValue",null)};return P(async()=>{o.modelValue&&await B(o.modelValue),m.value=!0}),(e,a)=>{const K=C("ypinput"),M=C("yppage");return m.value?(n(),c("div",E,[t("div",O,[t("div",{onClick:a[0]||(a[0]=d=>i.value=!0)},[t("div",U,[t("div",{textContent:x(r.value)},null,8,z),S(t("div",A,[t("i",{class:"ri-close-circle-fill duration-300 mr-2 text-hui-200 hover:text-hong-300",onClick:w(L,["stop"])})],512),[[$,_.modelValue]])])])]),(n(),j(q,{to:"body"},[i.value?(n(),c("div",G,[t("div",H,[t("div",J,[Q,t("div",{class:"p-3",onClick:a[1]||(a[1]=d=>i.value=!1)},X)]),t("div",Y,[t("div",null,[b(K,{modelValue:s.keyword,"onUpdate:modelValue":a[2]||(a[2]=d=>s.keyword=d),placeholder:"关键词",onKeyup:F(y,["enter"])},null,8,["modelValue"])]),t("div",null,[t("button",{class:"yp-button rounded",onClick:w(y,["stop"])},"查询")])]),t("div",Z,[t("div",ee,[(n(!0),c(I,null,R(u,(d,oe)=>(n(),c("div",{class:"text-center p-2 bg-gray-50 text-gray-700 hover:bg-blue-50",onClick:se=>T(d)},x(d.title),9,te))),256))])]),l.pageCount>1?(n(),c("div",ae,[b(M,{onTopage:D,pageData:l},null,8,["pageData"])])):f("",!0)])])):f("",!0)]))])):f("",!0)}}};export{de as default};
