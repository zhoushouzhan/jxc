import{r,L as z,s as F,a as v,o as H,b as u,d as c,e as h,f as g,h as f,i as t,n as K,M as U,F as w,q as j,t as i,v as x,l as D,x as q,z as G,E as S,y as V,g as A}from"./index-ddd32adc.js";import L from"./form-2d0c91ac.js";const J=["innerHTML"],O=t("div",{class:"text-gray-400"},"建立模型前先录入字段",-1),Q=t("div",{class:"flex-1"},null,-1),W=t("div",{class:"hidden md:block min-w-[500px]"},null,-1),X={class:"flex justify-between"},Y={class:"flex space-x-1"},Z={class:"yp-table-datalist text-hui-300"},tt=t("thead",null,[t("tr",null,[t("th",null,"Id"),t("th",null,"注释"),t("th",null,"字段"),t("th",null,"类型"),t("th",null,"表单元素"),t("th",null,"扩展参数"),t("th",{class:"text-center"},"操作")])],-1),et=["onDblclick"],lt={class:"text-center"},st={class:"space-x-2"},nt=["onClick"],at=["onClick"],dt={__name:"index",setup(ot){const b=r([]);z.getters.formItem.forEach(l=>{b.push({id:l.id,title:l.name})});const p=F(""),m=v(""),_=v(0),y=r([]),n=r({totalRecords:0,pageCount:0,currentPage:1}),I=l=>{n.currentPage=l,a.page=l,o()},a=r({keyword:"",formItem:null,page:n.currentPage}),d=v(!1),$=()=>{m.value="增加字段",_.value=0,d.value=!0,p.value=L},k=l=>{m.value="编辑字段",_.value=l,d.value=!0,p.value=L},T=l=>{G({text:"确认删除吗？"}).then(async()=>{const s=await S("/cols/delete",{id:l});s.code?(V({type:"alter-success",text:s.msg}),o()):V({type:"alter-error",text:s.msg})}).catch(s=>{})},o=async()=>{const l=await A("/cols",a);l.code==1&&(n.totalRecords=l.data.total,n.pageCount=l.data.last_page,y.length=0,l.data.data.forEach(s=>{y.push(s)}))};return H(async()=>{o()}),(l,s)=>{const B=u("ypselect"),E=u("ypinput"),M=u("yppage"),P=u("yplayout"),N=u("ypdialog");return c(),h(w,null,[g(P,null,{header:f(e=>[t("i",{class:K(["ri-2x text-gray-500 ml-2",e.meta.icon||"ri-information-line"])},null,2),t("div",{class:"text-xl px-3",innerHTML:e.meta.title},null,8,J),O,Q,W]),list:f(()=>[t("div",X,[t("div",Y,[g(B,{itemList:b,modelValue:a.formItem,"onUpdate:modelValue":s[0]||(s[0]=e=>a.formItem=e),defaultTitle:"--选择字段类型--"},null,8,["itemList","modelValue"]),g(E,{modelValue:a.keyword,"onUpdate:modelValue":s[1]||(s[1]=e=>a.keyword=e),placeholder:"关键词+回车",onKeyup:U(o,["enter"]),class:"min-w-[200px]"},null,8,["modelValue"]),t("div",{class:"flex-shrink-0"},[t("button",{class:"btn",type:"button",onClick:o},"查询")])]),t("div",null,[t("button",{class:"btn btn-lan",type:"button",onClick:$},"增加字段")])]),t("table",Z,[tt,t("tbody",null,[(c(!0),h(w,null,j(y,(e,R)=>(c(),h("tr",{key:R,onDblclick:C=>k(e.id)},[t("td",null,i(e.id),1),t("td",null,i(e.alias),1),t("td",null,i(e.name),1),t("td",null,i(e.type),1),t("td",null,i(e.formitem),1),t("td",null,i(e.extends),1),t("td",lt,[t("div",st,[t("button",{class:"btn btn-lan",onClick:C=>k(e.id)},"编辑",8,nt),t("button",{class:"btn btn-hong",onClick:C=>T(e.id)},"删除",8,at)])])],40,et))),128))])]),t("div",null,[n.pageCount>1?(c(),x(M,{key:0,onTopage:I,pageData:n,class:"mt-5"},null,8,["pageData"])):D("",!0)])]),_:1}),d.value?(c(),x(N,{key:0,width:"1000",title:m.value,mask:1,onClose:s[3]||(s[3]=e=>d.value=!1)},{default:f(()=>[(c(),x(q(p.value),{id:_.value,onClose:s[2]||(s[2]=e=>d.value=!1),onGetList:o},null,40,["id"]))]),_:1},8,["title"])):D("",!0)],64)}}};export{dt as default};
