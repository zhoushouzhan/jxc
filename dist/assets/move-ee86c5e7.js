import{a as b,r as f,o as E,b as p,c as K,d as a,v as Z,h as x,i as t,f as d,e as i,l as u,M as q,F as z,q as H,t as c,m as $,k,g,y as V,E as A}from"./index-ddd32adc.js";const G=t("i",{class:"ri-2x text-gray-500 ml-2 ri-arrow-left-right-fill"},null,-1),I=t("div",{class:"text-xl px-3"},"调拔单",-1),J=t("div",{class:"flex-1 flex flex-row-reverse space-x-reverse space-x-2"},null,-1),O={class:"bg-white text-sm"},P={class:"space-y-3"},Q={class:"flex items-center"},R=t("div",null," 出仓： ",-1),W={key:0,class:"flex items-center"},X=t("div",null," 入仓： ",-1),Y={key:0,class:"space-y-3 mt-5"},tt={class:"yp-table"},et=t("thead",null,[t("tr",null,[t("th",{class:"text-center"},"序号"),t("th",{class:"w-40"},"图片"),t("th",null,"标题"),t("th",null,"条码"),t("th",null,"零售价"),t("th",null,"数量"),t("th",null,"库存"),t("th",null,"备注"),t("th",{class:"text-center"},"操作")])],-1),lt={class:"text-center"},ot={class:"w-40"},st=["src"],at={class:"text-center"},nt=["onClick"],dt=t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-5 h-5 fill-gray-600 hover:fill-red-500"},[t("path",{fill:"none",d:"M0 0h24v24H0z"}),t("path",{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 10.5858L9.17157 7.75736L7.75736 9.17157L10.5858 12L7.75736 14.8284L9.17157 16.2426L12 13.4142L14.8284 16.2426L16.2426 14.8284L13.4142 12L16.2426 9.17157L14.8284 7.75736L12 10.5858Z"})],-1),it=[dt],ct={class:"flex justify-center py-2 space-x-2 mt-3"},rt=t("i",{class:"ri-save-line ri-lg pr-1"},null,-1),ut=t("i",{class:"ri-arrow-go-back-fill ri-lg pr-1"},null,-1),pt={__name:"move",props:{id:{default:0},t:{default:0},page:{default:null}},emits:["jumpCom"],setup(L,{emit:C}){const m=L,U=C,n=b(""),D=f([]),h=b(!1),l=f({godown_id:0,out_godown_id:0,enabled:0,type:3,member_id:null,bill:[]}),w=()=>{U("jumpCom",{to:"list"})},j=async()=>{if(n.value=="")return;const e=await g("goods/details",{code:n.value,godown_id:l.out_godown_id});if(e.code==1){if(e.data.stock==0){V({type:"alter-error",text:"库存不足"});return}let o={goods_id:e.data.id,title:e.data.title,godown_id:l.godown_id,category_id:e.data.category.id,thumbFile:e.data.thumbFile,storeprice:e.data.storeprice.toString().replace(/,/g,""),labelprice:e.data.labelprice.toString().replace(/,/g,""),stock:e.data.stock,intro:"",status:0,sellprice:e.data.labelprice.toString().replace(/,/g,""),numbers:1,code:e.data.code};l.bill.unshift(o),n.value=""}},B=e=>{l.bill.splice(e,1)},F=async()=>{const e=await g("godown/index");if(e.code==1)for(let o in e.data.data)D.push(e.data.data[o])},M=async()=>{const e=await A("kucundan/save",l);e.code==1&&(l.bill.splice(0),V({type:"alter-success",text:e.msg}))},N=async e=>{const o=await g("kucundan/read",{id:e});o.code==1&&(l.id=e,l.godown_id=o.data.godown_id,l.out_godown_id=o.data.out_godown_id,l.type=o.data.type,l.bill=o.data.bill)};return E(async()=>{m.id?await N(m.id):await F(),h.value=!0}),(e,o)=>{const v=p("yplist"),_=p("ypinput"),S=p("yplayout"),T=K("viewer");return h.value?(a(),Z(S,{key:0},{header:x(()=>[G,I,J,t("button",{class:"btn btn-chen",onClick:w},"返回")]),list:x(()=>[t("div",O,[t("div",P,[t("div",Q,[R,t("div",null,[d(v,{controller:"godown",modelValue:l.out_godown_id,"onUpdate:modelValue":o[0]||(o[0]=s=>l.out_godown_id=s),colkey:"title",defaultTitle:"--选择仓库--"},null,8,["modelValue"])])]),l.out_godown_id?(a(),i("div",W,[X,t("div",null,[d(v,{controller:"godown",modelValue:l.godown_id,"onUpdate:modelValue":o[1]||(o[1]=s=>l.godown_id=s),colkey:"title",defaultTitle:"--选择仓库--"},null,8,["modelValue"])])])):u("",!0)]),l.godown_id?(a(),i("div",Y,[t("div",null,[d(_,{modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=s=>n.value=s),placeholder:"录入条码",onKeyup:q(j,["enter"]),maxlength:"15"},null,8,["modelValue"]),t("table",tt,[et,t("tbody",null,[(a(!0),i(z,null,H(l.bill,(s,y)=>(a(),i("tr",null,[t("td",lt,c(y+1),1),t("td",ot,[$(t("img",{src:s.thumbFile,class:"w-28 h-28 object-cover"},null,8,st),[[T]])]),t("td",null,c(s.title),1),t("td",null,c(s.code),1),t("td",null,c(s.storeprice),1),t("td",null,[d(_,{type:"number",modelValue:s.numbers,"onUpdate:modelValue":r=>s.numbers=r,placeholder:"请输入数量",max:s.stock,maxlength:"9"},null,8,["modelValue","onUpdate:modelValue","max"])]),t("td",at,c(s.stock),1),t("td",null,[d(_,{modelValue:s.intro,"onUpdate:modelValue":r=>s.intro=r,placeholder:"请输入备注",maxlength:"30"},null,8,["modelValue","onUpdate:modelValue"])]),t("td",null,[t("div",{class:"flex items-center justify-center",onClick:r=>B(y)},it,8,nt)])]))),256))])])])])):u("",!0),t("div",ct,[l.bill.length?(a(),i("button",{key:0,class:"btn btn-hong",type:"button",onClick:M},[rt,k(" 提交 ")])):u("",!0),t("button",{class:"btn",type:"button",onClick:w},[ut,k(" 返回 ")])])])]),_:1})):u("",!0)}}};export{pt as default};
