import{a as f,r as h,w as y,o as C,d as r,e as v,F as L,q as b,g as B,b as E,v as O}from"./index-0f467f6d.js";const j={class:"flex space-x-1"},F={__name:"linkage",props:{modelValue:{default:[]},col:{type:Object}},emits:["update:modelValue"],setup(g,{emit:_}){const u=g;let d=JSON.parse(u.col.extends);const p=f(d.pid),t=h(u.modelValue||[]),a=f(0),o=h([]);y(t,e=>{p.value=e[a.value],i(),k("update:modelValue",e[e.length-1])});const i=async()=>{if(typeof p.value>"u")return;const e=await B(d.url,{pid:p.value,ids:t});e.code==1&&(o.length&&(o.length=a.value+1,t.length=a.value+1),e.data.forEach(l=>{let s=[];Object.keys(l).forEach(n=>{s.push({title:l[n].title,value:l[n].id})}),o.push(s)}))},k=_,V=e=>{a.value=e};return C(()=>{console.log(u.modelValue),i()}),(e,l)=>{const s=E("ypselect");return r(),v("div",j,[(r(!0),v(L,null,b(o,(n,c)=>(r(),O(s,{itemList:n,modelValue:t[c],"onUpdate:modelValue":m=>t[c]=m,key:c,onClickCapture:m=>V(c)},null,8,["itemList","modelValue","onUpdate:modelValue","onClickCapture"]))),128))])}}};export{F as default};
