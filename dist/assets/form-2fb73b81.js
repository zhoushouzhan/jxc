import{a as U,r as c,B as k,w as B,o as C,g as r,b as n,d as D,e as N,i as t,f as i,m,I as u,l as j,E,y as S}from"./index-ddd32adc.js";const I={key:0,class:"text-sm text-gray-800"},M={class:"bg-white select-none p-2 space-y-3"},O={class:"flex items-center"},q=t("div",{class:"w-24 text-right pr-5"},"上级",-1),z={class:"flex-1"},A={class:"flex items-center"},F=t("div",{class:"w-24 text-right pr-5"},"名称",-1),G={class:"flex-1"},H={class:"flex items-center"},J=t("div",{class:"w-24 text-right pr-5"},"类型",-1),K={class:"flex-1"},P={class:"flex items-center"},Q=t("div",{class:"w-24 text-right pr-5"},"图标",-1),R={class:"flex-1"},T={class:"flex items-center"},W=t("div",{class:"w-24 text-right pr-5"},"地址",-1),X={class:"flex-1"},Y={class:"flex items-center"},Z=t("div",{class:"w-24 text-right pr-5"},"绑定模型",-1),$={class:"flex-1"},tt={class:"flex items-center"},et=t("div",{class:"w-24 text-right pr-5"},"排序",-1),st={class:"flex-1"},ot={class:"flex items-center"},lt=t("div",{class:"w-24 text-right pr-5"},"显示",-1),it={class:"flex-1 flex items-center"},at={__name:"form",props:{id:Number},setup(x){const p=x,_=U(!1),e=c({pid:"0",title:"",icon:"",type:"",path:"",sort:"",status:"",mod_id:0}),h=c([{id:0,path:"/",name:"top",type:1,status:0,sort:0,mod_id:0,title:"顶级节点",children:[]}]),y=c([{id:1,title:"目录"},{id:2,title:"页面"}]),v=c([]),V=async()=>{const l=await E("/rule/save",e);l.code&&(S({type:"alter-success",text:l.msg}),g.update())},w=()=>{for(let l in e)e[l]=""},g=k("setcom");return B(()=>e.type,(l,s)=>{l==1&&(e.path="")}),C(async()=>{const l=await r("/rule/index");if(l.code&&(h[0].children=l.data),p.id){e.id=p.id;const d=await r("/rule/getrule",{id:p.id});Object.keys(e).map(a=>{e[a]=d.data[a]})}const s=await r("/mod/index");s.code==1&&s.data.forEach(d=>{v.push({id:d.id,title:d.alias})}),_.value=!0}),(l,s)=>{const d=n("yptree"),a=n("ypinput"),f=n("ypselect"),b=n("ypicon"),L=n("ypswitch");return _.value?(D(),N("div",I,[t("div",M,[t("div",O,[q,t("div",z,[i(d,{itemList:h,modelValue:e.pid,"onUpdate:modelValue":s[0]||(s[0]=o=>e.pid=o)},null,8,["itemList","modelValue"])])]),t("div",A,[F,t("div",G,[i(a,{modelValue:e.title,"onUpdate:modelValue":s[1]||(s[1]=o=>e.title=o),placeholder:"如:系统管理"},null,8,["modelValue"])])]),t("div",H,[J,t("div",K,[i(f,{itemList:y,modelValue:e.type,"onUpdate:modelValue":s[2]||(s[2]=o=>e.type=o)},null,8,["itemList","modelValue"])])]),m(t("div",P,[Q,t("div",R,[i(b,{modelValue:e.icon,"onUpdate:modelValue":s[3]||(s[3]=o=>e.icon=o),placeholder:"如:ri-home-smile-2-line"},null,8,["modelValue"])])],512),[[u,e.type==1]]),m(t("div",T,[W,t("div",X,[i(a,{modelValue:e.path,"onUpdate:modelValue":s[4]||(s[4]=o=>e.path=o),placeholder:"如:/System"},null,8,["modelValue"])])],512),[[u,e.type==2]]),m(t("div",Y,[Z,t("div",$,[i(f,{itemList:v,modelValue:e.mod_id,"onUpdate:modelValue":s[5]||(s[5]=o=>e.mod_id=o)},null,8,["itemList","modelValue"])])],512),[[u,e.type==2]]),t("div",tt,[et,t("div",st,[i(a,{modelValue:e.sort,"onUpdate:modelValue":s[6]||(s[6]=o=>e.sort=o),placeholder:"正序排列"},null,8,["modelValue"])])]),t("div",ot,[lt,t("div",it,[i(L,{modelValue:e.status,"onUpdate:modelValue":s[7]||(s[7]=o=>e.status=o)},null,8,["modelValue"])])])]),t("div",{class:"flex justify-center py-3 space-x-2"},[t("button",{class:"btn btn-hong",type:"button",onClick:V}," 保存 "),t("button",{class:"btn",type:"button",onClick:w}," 重置 ")])])):j("",!0)}}};export{at as default};
