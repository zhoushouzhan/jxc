import{a as k,r as c,B as N,w as B,o as C,g as p,b as n,d as D,e as j,i as t,f as i,m,I as u,k as f,l as E,E as S,y as I}from"./index-0f467f6d.js";const M={key:0,class:"text-sm text-gray-800"},O={class:"bg-white select-none p-2 space-y-3"},T={class:"flex items-center"},q=t("div",{class:"w-24 text-right pr-5"},"上级",-1),z={class:"flex-1"},A={class:"flex items-center"},F=t("div",{class:"w-24 text-right pr-5"},"名称",-1),G={class:"flex-1"},H={class:"flex items-center"},J=t("div",{class:"w-24 text-right pr-5"},"类型",-1),K={class:"flex-1"},P={class:"flex items-center"},Q=t("div",{class:"w-24 text-right pr-5"},"图标",-1),R={class:"flex-1"},W={class:"flex items-center"},X=t("div",{class:"w-24 text-right pr-5"},"地址",-1),Y={class:"flex-1"},Z={class:"flex items-center"},$=t("div",{class:"w-24 text-right pr-5"},"绑定模型",-1),tt={class:"flex-1"},et={class:"flex items-center"},st=t("div",{class:"w-24 text-right pr-5"},"排序",-1),ot={class:"flex-1"},lt={class:"flex items-center"},it=t("div",{class:"w-24 text-right pr-5"},"显示",-1),at={class:"flex-1 flex items-center"},dt=t("i",{class:"ri-save-line ri-lg pr-1"},null,-1),nt=t("i",{class:"ri-format-clear ri-lg pr-1"},null,-1),rt={__name:"form",props:{id:Number},setup(x){const r=x,_=k(!1),e=c({pid:"0",title:"",icon:"",type:"",path:"",sort:"",status:"",mod_id:0}),h=c([{id:0,path:"/",name:"top",type:1,status:0,sort:0,mod_id:0,title:"顶级节点",children:[]}]),V=c([{value:1,title:"目录"},{value:2,title:"页面"}]),v=c([]),g=async()=>{const l=await S("/rule/save",e);l.code&&(I({type:"alter-success",text:l.msg}),b.update())},w=()=>{for(let l in e)e[l]=""},b=N("setcom");return B(()=>e.type,(l,s)=>{l==1&&(e.path="")}),C(async()=>{const l=await p("/rule/index");if(l.code&&(h[0].children=l.data),r.id){e.id=r.id;const a=await p("/rule/getrule",{id:r.id});Object.keys(e).map(d=>{e[d]=a.data[d]})}const s=await p("/mod/index");s.code==1&&s.data.forEach(a=>{v.push({value:a.id,title:a.alias})}),_.value=!0}),(l,s)=>{const a=n("yptree"),d=n("ypinput"),y=n("ypselect"),L=n("ypicon"),U=n("ypswitch");return _.value?(D(),j("div",M,[t("div",O,[t("div",T,[q,t("div",z,[i(a,{itemList:h,modelValue:e.pid,"onUpdate:modelValue":s[0]||(s[0]=o=>e.pid=o)},null,8,["itemList","modelValue"])])]),t("div",A,[F,t("div",G,[i(d,{modelValue:e.title,"onUpdate:modelValue":s[1]||(s[1]=o=>e.title=o),placeholder:"如:系统管理"},null,8,["modelValue"])])]),t("div",H,[J,t("div",K,[i(y,{itemList:V,modelValue:e.type,"onUpdate:modelValue":s[2]||(s[2]=o=>e.type=o)},null,8,["itemList","modelValue"])])]),m(t("div",P,[Q,t("div",R,[i(L,{modelValue:e.icon,"onUpdate:modelValue":s[3]||(s[3]=o=>e.icon=o),placeholder:"如:ri-home-smile-2-line"},null,8,["modelValue"])])],512),[[u,e.type==1]]),m(t("div",W,[X,t("div",Y,[i(d,{modelValue:e.path,"onUpdate:modelValue":s[4]||(s[4]=o=>e.path=o),placeholder:"如:/System"},null,8,["modelValue"])])],512),[[u,e.type==2]]),m(t("div",Z,[$,t("div",tt,[i(y,{itemList:v,modelValue:e.mod_id,"onUpdate:modelValue":s[5]||(s[5]=o=>e.mod_id=o)},null,8,["itemList","modelValue"])])],512),[[u,e.type==2]]),t("div",et,[st,t("div",ot,[i(d,{modelValue:e.sort,"onUpdate:modelValue":s[6]||(s[6]=o=>e.sort=o),placeholder:"正序排列"},null,8,["modelValue"])])]),t("div",lt,[it,t("div",at,[i(U,{modelValue:e.status,"onUpdate:modelValue":s[7]||(s[7]=o=>e.status=o)},null,8,["modelValue"])])])]),t("div",{class:"flex justify-center py-3 space-x-2"},[t("button",{class:"yp-button yp-button-orange rounded",type:"button",onClick:g},[dt,f(" 保存 ")]),t("button",{class:"yp-button yp-button-gray rounded",type:"button",onClick:w},[nt,f(" 重置 ")])])])):E("",!0)}}};export{rt as default};
