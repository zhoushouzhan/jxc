import{a as j,r,o as C,d as c,e as d,i as t,t as s,F as D,q as B,k as b,l as R,g as L,z as U,D as E}from"./index-169137c2.js";const N={key:0,class:"p-5"},S={class:"text-center"},F={key:0,class:"text-xl px-2"},I={key:1,class:"text-xl px-2"},O={class:"flex justify-between px-3"},V={class:"flex items-center space-x-2"},q=t("div",null,"入库人：",-1),z={class:"flex items-center space-x-2"},J=t("div",null,"录入时间：",-1),M=t("div",{class:"pl-5"},"单号：",-1),T={class:"yp-table-p-2"},A=t("thead",null,[t("tr",null,[t("th",{class:"text-center w-20"},"序号"),t("th",{class:"w-40"},"图片"),t("th",null,"名称"),t("th",null,"条码"),t("th",null,"成本"),t("th",null,"数量"),t("th",null,"备注")])],-1),G={class:"text-center"},H={class:"w-40"},K=["src"],P=t("i",{class:"ri-arrow-go-back-fill ri-lg pr-1"},null,-1),Q=t("i",{class:"ri-barcode-line ri-lg pr-1"},null,-1),X={__name:"view",props:{type:{default:1},id:{default:0}},emits:["jumpCom"],setup(u,{emit:x}){const p=u,y=x,_=j(!1),l=r({}),h=r([]);r(JSON.parse(sessionStorage.getItem("printBarcode"))||[]);const v=async n=>{const o=await L("kucundan/read",{id:n});if(o.code==1){for(let e in o.data)l[e]=o.data[e];l.bill.map((e,i)=>{h.push({id:e.goods_id,numbers:e.numbers})})}},f=()=>{y("jumpCom",{to:"list"})},g=async()=>{U({text:"确定生成吗？"}).then(async()=>{let n=[];n=await E("goods/barcode",h);let o=new Blob([n.data]),e=n.headers["content-disposition"],w=new RegExp("filename=([^;]+\\.[^\\.;]+);*").exec(e),k=decodeURI(w[1]),a=document.createElement("a"),m=window.URL.createObjectURL(o);a.style.display="none",a.href=m,a.download=k,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(m),formData.length=0,sessionStorage.removeItem("printBarcode")}).catch(n=>{console.log("no",n)})};return C(async()=>{p.id&&await v(p.id),_.value=!0}),(n,o)=>_.value?(c(),d("div",N,[t("div",S,[u.type==1?(c(),d("div",F,"入库单查看")):(c(),d("div",I,"出库单查看"))]),t("div",null,[t("div",O,[t("div",V,[q,t("div",null,s(l.admin.truename),1)]),t("div",z,[J,t("div",null,s(l.create_time),1),M,t("div",null,s(l.sn),1)])]),t("div",null,[t("table",T,[A,t("tbody",null,[(c(!0),d(D,null,B(l.bill,(e,i)=>(c(),d("tr",null,[t("td",G,s(i+1),1),t("td",H,[t("img",{src:e.thumbFile,class:"object-cover"},null,8,K)]),t("td",null,s(e.title),1),t("td",null,s(e.code),1),t("td",null," ￥"+s(e.inprice),1),t("td",null,s(e.numbers),1),t("td",null,s(e.intro),1)]))),256))])])])]),t("div",{class:"flex justify-center py-2 space-x-2 mt-3"},[t("button",{class:"yp-button yp-button-orange rounded",type:"button",onClick:f},[P,b(" 返回 ")]),t("button",{class:"yp-button yp-button-black rounded",onClick:g},[Q,b(" 打印所有条码 ")])])])):R("",!0)}};export{X as default};
