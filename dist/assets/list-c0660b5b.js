import{a as C,r as _,w as I,o as F,b as m,c as K,d as l,v as R,h as w,i as t,f as i,M as T,m as v,e as d,F as q,q as z,t as h,l as g,k as A,g as S,y as D,z as G,E as H}from"./index-ddd32adc.js";const J=t("i",{class:"ri-2x ri-user-3-fill text-gray-500 ml-2"},null,-1),O=t("div",{class:"text-xl px-3"},"会员管理",-1),Q=t("div",{class:"flex-1 flex flex-row-reverse space-x-reverse space-x-2"},null,-1),W={class:"flex justify-between"},X={class:"yp-table-datalist text-hui-300"},Y={class:"bg-gray-100"},Z={class:"w-10"},tt=t("th",null,"ID",-1),et=t("th",null,"姓名",-1),st=t("th",null,"性别",-1),ot=t("th",null,"联系电话",-1),lt=t("th",null,"备注",-1),at=t("th",null,"操作",-1),nt=["onDblclick"],dt={class:"border px-2"},ct={key:0},it={key:1},rt={key:2},ut={class:"space-x-2"},pt=["onClick"],_t=["onClick"],mt={class:"border p-2"},ht={class:"border p-2",colspan:"6"},gt={key:0,class:"mt-3"},xt={__name:"list",props:{member:{default:[]}},emits:["jumpCom","chooseMember"],setup(bt,{emit:j}){const b=j,B=C(!1),L=()=>{b("jumpCom",{to:"add"})},a=_({totalRecords:0,pageCount:0,currentPage:1}),M=e=>{a.currentPage=e,u()},r=_([]),y=C(null),n=_([]),c=_([]);I(c,(e,o)=>{n.length=0,e.length>0?r.forEach(x=>{n.push(x.id)}):n.length=0});const N=e=>{b("jumpCom",{to:"edit",id:e})},u=async()=>{let e=await S("member/index",{page:a.currentPage,keywords:y.value});if(e.code==1){a.currentPage=e.data.current_page,a.pageCount=e.data.last_page,a.totalRecords=e.data.total,r.length=0;for(let o in e.data.data)r[o]=e.data.data[o]}B.value=!0},V=e=>{if(e==0&&(e=n.length?n:0),!e){D({type:"alter-error",text:"请选择项目"});return}G({text:"确认删除吗？"}).then(async()=>{const o=await H("member/delete",{ids:e});o.code&&(D({type:"alter-success",text:o.msg}),u())}).catch(o=>{})},P=e=>{b("chooseMember",e)};return F(()=>{u()}),(e,o)=>{const x=m("ypinput"),f=m("ypcheckbox"),U=m("yppage"),$=m("yplayout"),k=K("tooltip");return l(),R($,null,{header:w(s=>[J,O,Q]),list:w(()=>[t("div",W,[t("div",null,[i(x,{modelValue:y.value,"onUpdate:modelValue":o[0]||(o[0]=s=>y.value=s),placeholder:"关键词+回车",onKeyup:T(u,["enter"]),class:"min-w-[200px]"},null,8,["modelValue"])]),t("div",null,[t("button",{class:"btn btn-lan",onClick:L},"增加")])]),t("table",X,[t("thead",Y,[t("tr",null,[t("th",Z,[v(i(f,{value:"all",modelValue:c,"onUpdate:modelValue":o[1]||(o[1]=s=>c=s)},null,8,["modelValue"]),[[k,"全选",void 0,{top:!0}]])]),tt,et,st,ot,lt,at])]),t("tbody",null,[(l(!0),d(q,null,z(r,(s,E)=>(l(),d("tr",{key:E,onDblclick:p=>P(s)},[t("td",dt,[i(f,{value:s.id,modelValue:n,"onUpdate:modelValue":o[2]||(o[2]=p=>n=p)},null,8,["value","modelValue"])]),t("td",null,h(s.id),1),t("td",null,h(s.truename),1),t("td",null,[s.sex==1?(l(),d("span",ct,"男")):g("",!0),s.sex==2?(l(),d("span",it,"女")):g("",!0),s.sex==3?(l(),d("span",rt,"保密")):g("",!0)]),t("td",null,h(s.mobile),1),t("td",null,h(s.intro),1),t("td",ut,[t("button",{class:"btn",onClick:p=>N(s.id)},"编辑",8,pt),t("button",{class:"btn btn-hong",onClick:p=>V(s.id)},"删除",8,_t)])],40,nt))),128))]),t("tfoot",null,[t("tr",null,[t("td",mt,[v(i(f,{value:"all",modelValue:c,"onUpdate:modelValue":o[3]||(o[3]=s=>c=s)},null,8,["modelValue"]),[[k,"全选",void 0,{right:!0}]])]),t("td",ht,[v((l(),d("button",{class:"btn btn-hong",onClick:o[4]||(o[4]=s=>V(0))},[A("批量删除")])),[[k,"批量删除",void 0,{bottom:!0}]])])])])]),a.pageCount>1?(l(),d("div",gt,[i(U,{onTopage:M,pageData:a},null,8,["pageData"])])):g("",!0)]),_:1})}}};export{xt as default};
