import{a as k,r as b,o as L,b as C,c as q,d as o,v as I,h as U,i as t,e as l,F as x,q as w,n as M,t as s,m as j,f as y,k as S,l as D,g as v,z as T,E as $,y as A}from"./index-ddd32adc.js";const G=t("i",{class:"ri-2x text-gray-500 ml-2 ri-checkbox-multiple-fill"},null,-1),H=t("div",{class:"text-xl px-3"},"审批中心",-1),J=t("div",{class:"flex-1 flex flex-row-reverse space-x-reverse space-x-2"},null,-1),K={class:"flex space-x-1"},P={class:"overflow-y-auto h-[900px]"},Q={class:"yp-table"},R=t("thead",null,[t("tr",null,[t("th",{class:"text-center"},"序号"),t("th",{class:"text-center"},"图片"),t("th",null,"名称"),t("th",{class:"w-24"},"成本"),t("th",{class:"w-28"},"售价"),t("th",{class:"w-20"},"数量"),t("th",null,"备注")])],-1),W=["onClick"],X={class:"text-center"},Y=["src"],Z={class:"text-red-600 font-bold"},tt={class:"flex-1"},et={class:"overflow-y-auto max-h-[440px]"},st={class:"yp-table"},ot=t("thead",null,[t("tr",null,[t("th",{class:"text-center w-20"},"序号"),t("th",null,"名称"),t("th",{class:"w-24"},"编码"),t("th",{class:"w-24"},"标签"),t("th",{class:"w-24"},"成本"),t("th",{class:"w-24"},"零售价"),t("th",{class:"w-28"},"日期")])],-1),lt={key:0},at={class:"hover:bg-gray-100"},ct={class:"text-center"},nt={class:"whitespace-nowrap"},dt={class:"whitespace-nowrap"},rt={key:1},it=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-center py-2 text-gray-400"},"暂无数据")])],-1),ut=[it],_t={class:"overflow-y-auto max-h-[440px]"},ht={class:"yp-table"},pt=t("thead",null,[t("tr",null,[t("th",{class:"text-center w-20"},"图片"),t("th",null,"名称"),t("th",{class:"w-24"},"编码"),t("th",{class:"w-24"},"标签"),t("th",{class:"w-24"},"成本"),t("th",{class:"w-24"},"零售价"),t("th",{class:"w-28"},"日期")])],-1),yt={key:0},gt={class:"hover:bg-gray-100"},bt=["src"],xt={class:"whitespace-nowrap"},wt={class:"whitespace-nowrap"},vt={key:1},mt=t("tr",null,[t("td",{colspan:"3"},[t("div",{class:"text-center py-2 text-gray-400"},"暂无数据")])],-1),ft=[mt],Vt={class:"flex py-2 space-x-2 mt-3"},kt=t("i",{class:"ri-save-line ri-lg pr-1"},null,-1),Ut={__name:"checkorder",props:{id:{default:0}},emits:["jumpCom"],setup(B,{emit:F}){const m=B,f=F,V=k(!1),g=k(0),c=b({godown_id:0,type:1,bill:[]}),h=b([]),u=b([]),N=()=>{f("jumpCom",{to:"list"})},O=async a=>{const n=await v("kucundan/read",{id:a});n.code==1&&(c.id=a,c.enabled=1,c.godown_id=n.data.godown_id,c.type=n.data.type,c.bill=n.data.bill)},z=async a=>{if(g.value==a.goods_id)return;g.value=a.goods_id;let n=a.goods_id;const d=await v("goodsitem/near",{goods_id:n});d.code==1&&(h.length=0,Object.keys(d.data).map(r=>{h[r]=d.data[r]}));const _=await v("goodsitem/label",{goods_id:n});_.code==1&&(u.length=0,Object.keys(_.data).map(r=>{u[r]=_.data[r]})),console.log(u)},E=async()=>{T({text:"确定入库吗？"}).then(async()=>{const a=await $("kucundan/save",c);a.code==1&&(A({type:"alter-success",text:a.msg}),f("jumpCom",{to:"list"}))}).catch(()=>{console.log("cancel")})};return L(async()=>{m.id&&await O(m.id),V.value=!0}),(a,n)=>{const d=C("ypinput"),_=C("yplayout"),r=q("viewer");return V.value?(o(),I(_,{key:0},{header:U(()=>[G,H,J,t("button",{class:"yp-button yp-button-sm yp-button-orange rounded-sm",onClick:N},"返回")]),list:U(()=>[t("div",K,[t("div",P,[t("table",Q,[R,t("tbody",null,[(o(!0),l(x,null,w(c.bill,(e,p)=>(o(),l("tr",{class:M(["hover:bg-gray-100",{"bg-gray-200":g.value==e.goods_id}]),onClick:i=>z(e)},[t("td",X,s(p+1),1),t("td",null,[j(t("img",{src:e.thumbFile,class:"w-28 h-28 object-cover"},null,8,Y),[[r]])]),t("td",null,[t("div",null,s(e.title),1),t("div",Z,s(e.code),1)]),t("td",null,[y(d,{modelValue:e.inprice,"onUpdate:modelValue":i=>e.inprice=i,placeholder:"请输入价格"},null,8,["modelValue","onUpdate:modelValue"])]),t("td",null,[y(d,{modelValue:e.storeprice,"onUpdate:modelValue":i=>e.storeprice=i,placeholder:"销售价格"},null,8,["modelValue","onUpdate:modelValue"])]),t("td",null,[y(d,{modelValue:e.numbers,"onUpdate:modelValue":i=>e.numbers=i,placeholder:"请输入数量"},null,8,["modelValue","onUpdate:modelValue"])]),t("td",null,[y(d,{modelValue:e.intro,"onUpdate:modelValue":i=>e.intro=i,placeholder:"请输入备注"},null,8,["modelValue","onUpdate:modelValue"])])],10,W))),256))])])]),t("div",tt,[t("div",et,[t("table",st,[ot,h.length?(o(),l("tbody",lt,[(o(!0),l(x,null,w(h,(e,p)=>(o(),l("tr",at,[t("td",ct,s(p+1),1),t("td",nt,s(e.title),1),t("td",null,s(e.code),1),t("td",null,s(e.goods.label),1),t("td",null,s(e.inprice),1),t("td",null,s(e.goods.storeprice),1),t("td",dt,s(e.create_time.substring(0,e.create_time.indexOf(" "))),1)]))),256))])):(o(),l("tbody",rt,ut))])]),t("div",_t,[t("table",ht,[pt,u.length?(o(),l("tbody",yt,[(o(!0),l(x,null,w(u,(e,p)=>(o(),l("tr",gt,[t("td",null,[j(t("img",{src:e.goods.thumbFile,class:"w-28 h-28 object-cover"},null,8,bt),[[r]])]),t("td",xt,s(e.title),1),t("td",null,s(e.goods.code),1),t("td",null,s(e.goods.label),1),t("td",null,s(e.inprice),1),t("td",null,s(e.goods.storeprice),1),t("td",wt,s(e.create_time.substring(0,e.create_time.indexOf(" "))),1)]))),256))])):(o(),l("tbody",vt,ft))])])])]),t("div",Vt,[c.bill.length?(o(),l("button",{key:0,class:"yp-button rounded",type:"button",onClick:E},[kt,S(" 提交 ")])):D("",!0)])]),_:1})):D("",!0)}}};export{Ut as default};
