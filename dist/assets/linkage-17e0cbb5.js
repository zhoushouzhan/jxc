import{a as c,r as _,w as k,g as b,o as L,b as E,d as f,e as m,F as U,q as x,f as B,K as F,l as M}from"./index-0f467f6d.js";const N={key:0,class:"flex space-x-1"},j={__name:"linkage",props:{modelValue:{default:0},category:{default:[]}},emits:["update:modelValue"],setup(y,{emit:C}){const i=y,p=c(!1),o=c(0),v=c(!1),a=_([]),s=c(0),u=_([]);k(a,e=>{if(!e[s.value]){g("update:modelValue",e[e.length-1]);return}v.value&&(o.value=e[s.value],h(),g("update:modelValue",e[e.length-1]))});const h=async()=>{if(typeof o.value>"u"){p.value=!0;return}const e=await b("category/getSelect",{pid:o.value,ids:a});e.code==1&&(u.length&&(u.length=s.value+1,a.length=s.value+1),e.data.forEach(t=>{let n=[];Object.keys(t).forEach(l=>{n.push({title:t[l].title,value:t[l].id,bfe:t[l].bfe,slen:t[l].slen})}),u.push(n)})),p.value=!0},g=C,V=e=>{s.value=e};return L(()=>{if(i.modelValue){let e=i.category.path.split(",");for(let t in e)e[t]>0&&e[t]!=o.value&&a.push(parseInt(e[t]));a.push(i.modelValue)}h()}),(e,t)=>{const n=E("ypselect");return p.value?(f(),m("div",N,[(f(!0),m(U,null,x(u,(l,r)=>(f(),m("div",{key:r,class:"flex items-center whitespace-nowrap"},[B(n,{itemList:l,modelValue:a[r],"onUpdate:modelValue":d=>a[r]=d,onClickCapture:d=>V(r),onClick:t[0]||(t[0]=F(d=>v.value=!0,["stop"]))},null,8,["itemList","modelValue","onUpdate:modelValue","onClickCapture"])]))),128))])):M("",!0)}}};export{j as default};
