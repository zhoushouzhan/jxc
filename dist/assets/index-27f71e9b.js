import{r as u,M as F,s as H,a as g,o as K,b as p,d,e as h,f,h as x,i as e,n as V,N as U,k as q,F as D,q as G,t as i,v as b,l as I,x as S,z as j,E as A,y as L,g as J}from"./index-ffc5c309.js";import $ from"./form-9871a097.js";const O=["innerHTML"],Q=e("div",{class:"text-gray-400"},"建立模型前先录入字段",-1),W=e("div",{class:"flex-1"},null,-1),X={class:"hidden md:block min-w-[500px]"},Y={class:"flex space-x-1"},Z=e("i",{class:"ri-add-line ri-lg pr-1"},null,-1),ee=e("div",{class:"flex border-b bg-gray-100 leading-8 font-bold"},[e("div",{class:"text-center md:w-20 border-r w-8"},"Id"),e("div",{class:"md:w-32 pl-2 flex-1 md:flex-initial"},"注释"),e("div",{class:"md:w-32 pl-2 hidden md:block"},"字段"),e("div",{class:"md:w-32 pl-2 hidden md:block"},"类型"),e("div",{class:"md:w-32 pl-2 hidden md:block"},"表单元素"),e("div",{class:"flex-1 pl-2 hidden md:block"},"扩展参数"),e("div",{class:"w-14 text-center"},"操作")],-1),te=["onDblclick"],se={class:"text-center md:w-20 border-r w-8"},oe={class:"md:w-32 pl-2 flex-1 md:flex-initial"},ae={class:"md:w-32 pl-2 hidden md:block"},le={class:"md:w-32 pl-2 hidden md:block"},ne={class:"md:w-32 pl-2 hidden md:block"},de={class:"flex-1 pl-2 hidden md:block"},ie={class:"text-center space-x-2"},ce=["onClick"],re=["onClick"],_e={__name:"index",setup(pe){const k=u([{id:"",title:"全部"}]);F.getters.formItem.forEach(t=>{k.push({id:t.value,title:t.name})});const m=H(""),_=g(""),v=g(0),y=u([]),a=u({totalRecords:0,pageCount:0,currentPage:1}),N=t=>{a.currentPage=t,l.page=t,r()},l=u({keyword:"",formItem:"",page:a.currentPage}),c=g(!1),T=()=>{_.value="增加字段",v.value=0,c.value=!0,m.value=$},w=t=>{_.value="编辑字段",v.value=t,c.value=!0,m.value=$},B=t=>{j({text:"确认删除吗？"}).then(async()=>{const s=await A("/cols/delete",{id:t});s.code?(L({type:"alter-success",text:s.msg}),r()):L({type:"alter-error",text:s.msg})}).catch(s=>{})},r=async()=>{const t=await J("/cols",l);t.code==1&&(a.totalRecords=t.data.total,a.pageCount=t.data.last_page,y.length=0,t.data.data.forEach(s=>{y.push(s)}))};return K(async()=>{r()}),(t,s)=>{const E=p("ypselect"),M=p("ypinput"),P=p("yppage"),R=p("yplayout"),z=p("ypdialog");return d(),h(D,null,[f(R,null,{header:x(o=>[e("i",{class:V(["ri-2x text-gray-500 ml-2",o.meta.icon||"ri-information-line"])},null,2),e("div",{class:"text-xl px-3",innerHTML:o.meta.title},null,8,O),Q,W,e("div",X,[e("div",Y,[f(E,{itemList:k,modelValue:l.formItem,"onUpdate:modelValue":s[0]||(s[0]=n=>l.formItem=n)},null,8,["itemList","modelValue"]),f(M,{modelValue:l.keyword,"onUpdate:modelValue":s[1]||(s[1]=n=>l.keyword=n),placeholder:"关键词+回车",onKeyup:U(r,["enter"]),class:"min-w-[200px]"},null,8,["modelValue"]),e("button",{class:"yp-button yp-button-darkgreen rounded whitespace-nowrap",type:"button",onClick:T},[Z,q(" 增加 ")])])])]),list:x(()=>[e("div",null,[ee,(d(!0),h(D,null,G(y,(o,n)=>(d(),h("div",{class:V(["flex hover:bg-slate-500 hover:text-white duration-300 leading-10",n%2?"bg-gray-100":""]),key:n,onDblclick:C=>w(o.id)},[e("div",se,i(o.id),1),e("div",oe,i(o.alias),1),e("div",ae,i(o.name),1),e("div",le,i(o.type),1),e("div",ne,i(o.formitem),1),e("div",de,i(o.extends),1),e("div",ie,[e("button",{class:"yp-button yp-button-sm rounded",onClick:C=>w(o.id)},"编辑",8,ce),e("button",{class:"yp-button yp-button-sm yp-button-red rounded",onClick:C=>B(o.id)},"删除",8,re)])],42,te))),128)),a.pageCount>1?(d(),b(P,{key:0,onTopage:N,pageData:a,class:"mt-5"},null,8,["pageData"])):I("",!0)])]),_:1}),c.value?(d(),b(z,{key:0,width:"1000",title:_.value,mask:1,onClose:s[3]||(s[3]=o=>c.value=!1)},{default:x(()=>[(d(),b(S(m.value),{id:v.value,onClose:s[2]||(s[2]=o=>c.value=!1),onGetList:r},null,40,["id"]))]),_:1},8,["title"])):I("",!0)],64)}}};export{_e as default};
