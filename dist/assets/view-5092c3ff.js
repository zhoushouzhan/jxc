import{a as D,r as b,o as j,c as C,d as i,e as d,i as t,t as e,F as R,q as B,m as L,k as v,l as U,g as E,z as F,D as N}from"./index-ddd32adc.js";const V={key:0,class:"p-5"},I={class:"text-center"},O={key:0,class:"text-xl px-2"},S={key:1,class:"text-xl px-2"},q={class:"flex justify-between px-3"},z={class:"flex items-center space-x-2"},M=t("div",null,"入库人：",-1),T={class:"flex items-center space-x-2"},A=t("div",null,"录入时间：",-1),G=t("div",{class:"pl-5"},"单号：",-1),H={class:"yp-table-p-2"},J=t("thead",null,[t("tr",null,[t("th",{class:"text-center w-20"},"序号"),t("th",{class:"w-32"},"图片"),t("th",null,"名称"),t("th",null,"条码"),t("th",null,"成本"),t("th",null,"零售价"),t("th",null,"数量"),t("th",null,"备注")])],-1),K={class:"text-center"},P=["src"],Q=t("i",{class:"ri-arrow-go-back-fill ri-lg pr-1"},null,-1),W=t("i",{class:"ri-barcode-line ri-lg pr-1"},null,-1),Y={__name:"view",props:{type:{default:1},id:{default:0}},emits:["jumpCom"],setup(u,{emit:x}){const p=u,y=x,_=D(!1),o=b({}),h=b([]),f=async n=>{const a=await E("kucundan/read",{id:n});if(a.code==1){for(let s in a.data)o[s]=a.data[s];o.bill.map((s,l)=>{h.push({id:s.goods_id,numbers:s.numbers})})}},w=()=>{y("jumpCom",{to:"list"})},g=async()=>{F({text:"确定生成吗？"}).then(async()=>{let n=[];n=await N("goods/barcode",h);let a=new Blob([n.data]),s=n.headers["content-disposition"],r=new RegExp("filename=([^;]+\\.[^\\.;]+);*").exec(s),k=decodeURI(r[1]),c=document.createElement("a"),m=window.URL.createObjectURL(a);c.style.display="none",c.href=m,c.download=k,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(m),formData.length=0,sessionStorage.removeItem("printBarcode")}).catch(n=>{console.log("no",n)})};return j(async()=>{p.id&&await f(p.id),_.value=!0}),(n,a)=>{const s=C("viewer");return _.value?(i(),d("div",V,[t("div",I,[u.type==1?(i(),d("div",O,"入库单查看")):(i(),d("div",S,"出库单查看"))]),t("div",null,[t("div",q,[t("div",z,[M,t("div",null,e(o.admin.truename),1)]),t("div",T,[A,t("div",null,e(o.create_time),1),G,t("div",null,e(o.sn),1)])]),t("div",null,[t("table",H,[J,t("tbody",null,[(i(!0),d(R,null,B(o.bill,(l,r)=>(i(),d("tr",null,[t("td",K,e(r+1),1),t("td",null,[L(t("img",{src:l.thumbFile,class:"w-28 h-28 object-cover"},null,8,P),[[s]])]),t("td",null,e(l.title),1),t("td",null,e(l.code),1),t("td",null," ￥"+e(l.inprice),1),t("td",null," ￥"+e(l.storeprice),1),t("td",null,e(l.numbers),1),t("td",null,e(l.intro),1)]))),256))])])])]),t("div",{class:"flex justify-center py-2 space-x-2 mt-3"},[t("button",{class:"yp-button yp-button-orange rounded",type:"button",onClick:w},[Q,v(" 返回 ")]),t("button",{class:"yp-button yp-button-black rounded",onClick:g},[W,v(" 打印所有条码 ")])])])):U("",!0)}}};export{Y as default};
