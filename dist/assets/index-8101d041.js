import{s as V,a as r,o as B,b as x,d as s,e as o,f as M,h as y,i as t,n as N,k as T,F as m,q as b,t as n,j,M as z,l as f,v as g,x as E,z as F,E as H,y as S,g as q}from"./index-169137c2.js";import h from"./form-9b100604.js";import P from"./view-34be7551.js";const R={class:"flex items-center"},U=["innerHTML"],A=t("div",{class:"text-gray-400"},null,-1),G=t("div",{class:"flex-1"},null,-1),J=t("i",{class:"ri-add-line ri-lg pr-1"},null,-1),K={class:"yp-table-datalist"},O=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"账号"),t("th",null,"姓名"),t("th",null,"角色"),t("th",null,"手机号"),t("th",null,"状态"),t("th",null,"创建时间"),t("th",null,"上次登录时间"),t("th",null,"上次登录IP"),t("th",{class:"w-40 text-center"},"操作")])],-1),Q={class:"space-x-2"},W={class:"bg-green-500 text-white px-2 py-1 rounded"},X={class:"space-x-2 flex justify-center"},Y=["onClick"],Z=["onClick"],tt=["onClick"],ot={__name:"index",setup(et){const d=V(h),u=r(!1),v=r(""),i=r(""),_=r(0),k=l=>{d.value=P,i.value="查看管理员",_.value=l,u.value=!0},C=()=>{d.value=h,i.value="增加管理员",u.value=!0},w=l=>{d.value=h,i.value="编辑管理员",_.value=l,u.value=!0},D=async l=>{F({text:"确认删除吗？"}).then(async()=>{const a=await H("/admin/delete",{id:l});a.code==1&&(S({type:"alter-success",text:a.msg}),p())}).catch(a=>{})},p=async()=>{const l=await q("/admin/index");v.value=l.data};return B(()=>{p()}),(l,a)=>{const I=x("yplayout"),$=x("ypdialog");return s(),o(m,null,[M(I,null,{header:y(e=>[t("div",R,[t("i",{class:N(["ri-2x text-gray-500 ml-2",e.meta.icon||"ri-information-line"])},null,2),t("div",{class:"text-xl px-2",innerHTML:e.meta.title},null,8,U),A]),G,t("button",{class:"yp-button yp-button-orange rounded",type:"button",onClick:C},[J,T(" 增加 ")])]),list:y(()=>[t("table",K,[O,t("tbody",null,[(s(!0),o(m,null,b(v.value,(e,L)=>(s(),o("tr",{key:L},[t("td",null,n(e.id),1),t("td",null,n(e.username),1),t("td",null,n(e.truename),1),t("td",Q,[(s(!0),o(m,null,b(e.roles,(c,nt)=>(s(),o("span",W,n(c.title),1))),256))]),t("td",null,n(e.mobile),1),t("td",null,n(e.status),1),t("td",null,n(e.create_time),1),t("td",null,n(e.update_time),1),t("td",null,n(e.last_ip),1),t("td",X,[t("button",{class:"yp-button yp-button-sm yp-button-gray rounded",onClick:c=>k(e.id)},"查看",8,Y),t("button",{class:"yp-button yp-button-sm rounded",onClick:c=>w(e.id)},"编辑",8,Z),j(z).state.Sys.sysinfo.admin.maxroles==1?(s(),o("button",{key:0,class:"yp-button yp-button-sm yp-button-red rounded",onClick:c=>D(e.id)},"删除",8,tt)):f("",!0)])]))),128))])])]),_:1}),u.value?(s(),g($,{key:0,width:"800",title:i.value,mask:1,onClose:a[0]||(a[0]=e=>u.value=!1)},{default:y(()=>[(s(),g(E(d.value),{adminId:_.value,onUpdate:p},null,40,["adminId"]))]),_:1},8,["title"])):f("",!0)],64)}}};export{ot as default};
