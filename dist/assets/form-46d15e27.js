import{a as _,r as f,M as v,O as C,o as D,g as N,b as r,d as h,e as x,i as e,f as i,j as B,Q as E,t as V,l as g,k as y,E as I,y as O}from"./index-0f467f6d.js";const M={key:0,class:"bg-white text-sm"},S={class:"flex"},T={class:"space-y-3 p-2 w-1/2"},z={class:"flex items-center"},P=e("div",{class:"w-24 text-right pr-5"},"名称",-1),Q={class:"flex-1"},$={class:"flex items-center"},q=e("div",{class:"w-24 text-right pr-5"},"字段名",-1),A={class:"flex-1"},F={class:"flex items-center"},G=e("div",{class:"w-24 text-right pr-5"},"提示",-1),H={class:"flex-1"},J={class:"flex items-center"},K=e("div",{class:"w-24 text-right pr-5"},"字段类型",-1),R={class:"flex-1",itemid:"type"},W={class:"flex items-center"},X=e("div",{class:"w-24 text-right pr-5"},"字段长度",-1),Y={class:"flex-1"},Z={class:"flex items-center"},ee=e("div",{class:"w-24 text-right pr-5 pt-2"},"默认值",-1),te={class:"flex-1"},se={class:"flex items-center"},le=e("div",{class:"w-24 text-right pr-5 pt-2"},"表单元素",-1),oe={class:"flex-1"},ie={class:"flex items-center"},de=e("div",{class:"w-24 text-right pr-5"},"字段参数",-1),ae={class:"flex-1"},ne={class:"flex items-center"},ce=e("div",{class:"w-24 text-right pr-5"},"列宽",-1),re={class:"flex-1"},ue={class:"flex items-center"},me=e("div",{class:"w-24 text-right pr-5"},"前缀",-1),pe={class:"flex-1"},_e={class:"flex items-center"},fe=e("div",{class:"w-24 text-right pr-5"},"后缀",-1),ve={class:"flex-1"},he={class:"flex items-center"},xe=e("div",{class:"w-24 text-right pr-5"},"排序",-1),Ve={class:"flex-1",id:"sort"},ge={key:0,class:"flex-1"},ye=e("div",{class:"flex items-center justify-center font-bold"},"演示",-1),we={class:"flex h-full flex-col"},be={class:"p-2 font-bold bg-gray-100"},Ue={class:"p-2 border-t"},ke={class:"nowrapstr"},Le={class:"flex justify-center py-2 space-x-2 mt-5"},je=e("i",{class:"ri-save-line ri-lg pr-1"},null,-1),Ce=e("i",{class:"ri-format-clear ri-lg pr-1"},null,-1),Ne={__name:"form",props:{id:{default:0}},emits:["getList","close"],setup(w,{emit:b}){const u=_(!1),t=f({id:"",alias:"",name:"",type:"",length:"",defvalue:"",formitem:"",extends:"",colwidth:"",prefix:"",suffix:"",sort:"",tips:""}),a=w,m=b,n=_(""),U=v.getters.colType,c=f([]),k=async()=>{let o="";a.id>0?o="/cols/update":o="/cols/save";const s=await I(o,t);s.code==1&&(O({type:"alter-success",text:s.msg}),m("getList"))},L=C(()=>{let o=!0;return t.alias==""&&(o=!1),(t.formitem==""||t.name=="")&&(o=!1),(t.formitem=="none"||t.formitem=="hidden")&&(o=!1),o});return D(async()=>{if(c.length=0,v.getters.formItem.forEach(o=>{c.push({value:o.value,title:o.name})}),a.id){const o=await N("/cols/getItem",{id:a.id});Object.keys(t).map(s=>{t[s]=o.data[s]})}u.value=!0}),(o,s)=>{const d=r("ypinput"),p=r("ypselect"),j=r("cols");return u.value?(h(),x("div",M,[e("div",S,[e("div",T,[e("div",z,[P,e("div",Q,[i(d,{modelValue:t.alias,"onUpdate:modelValue":s[0]||(s[0]=l=>t.alias=l),placeholder:"请输入名称,字段标识"},null,8,["modelValue"])])]),e("div",$,[q,e("div",A,[i(d,{modelValue:t.name,"onUpdate:modelValue":s[1]||(s[1]=l=>t.name=l),placeholder:"用于建表,只能英文"},null,8,["modelValue"])])]),e("div",F,[G,e("div",H,[i(d,{modelValue:t.tips,"onUpdate:modelValue":s[2]||(s[2]=l=>t.tips=l),placeholder:"提示信息"},null,8,["modelValue"])])]),e("div",J,[K,e("div",R,[i(p,{modelValue:t.type,"onUpdate:modelValue":s[3]||(s[3]=l=>t.type=l),itemList:B(U)},null,8,["modelValue","itemList"])])]),e("div",W,[X,e("div",Y,[i(d,{modelValue:t.length,"onUpdate:modelValue":s[4]||(s[4]=l=>t.length=l),placeholder:"请输入字段长度"},null,8,["modelValue"])])]),e("div",Z,[ee,e("div",te,[i(d,{modelValue:t.defvalue,"onUpdate:modelValue":s[5]||(s[5]=l=>t.defvalue=l),placeholder:"请输入默认值"},null,8,["modelValue"])])]),e("div",se,[le,e("div",oe,[i(p,{itemList:c,modelValue:t.formitem,"onUpdate:modelValue":s[6]||(s[6]=l=>t.formitem=l)},null,8,["itemList","modelValue"])])]),e("div",ie,[de,e("div",ae,[i(d,{modelValue:t.extends,"onUpdate:modelValue":s[7]||(s[7]=l=>t.extends=l),placeholder:"功能型字段需要填写参数"},null,8,["modelValue"])])]),e("div",ne,[ce,e("div",re,[i(d,{modelValue:t.colwidth,"onUpdate:modelValue":s[8]||(s[8]=l=>t.colwidth=l),placeholder:"请输入列宽"},null,8,["modelValue"])])]),e("div",ue,[me,e("div",pe,[i(d,{modelValue:t.prefix,"onUpdate:modelValue":s[9]||(s[9]=l=>t.prefix=l),placeholder:"请输入前缀"},null,8,["modelValue"])])]),e("div",_e,[fe,e("div",ve,[i(d,{modelValue:t.suffix,"onUpdate:modelValue":s[10]||(s[10]=l=>t.suffix=l),placeholder:"请输入后缀"},null,8,["modelValue"])])]),e("div",he,[xe,e("div",Ve,[i(d,{modelValue:t.sort,"onUpdate:modelValue":s[11]||(s[11]=l=>t.sort=l),placeholder:"请输入排序"},null,8,["modelValue"])])])]),L.value?(h(),x("div",ge,[ye,e("div",we,[e("div",null,[i(j,{col:t,modelValue:n.value,"onUpdate:modelValue":s[12]||(s[12]=l=>n.value=l)},null,8,["col","modelValue"])]),e("div",null,[e("div",{class:"border",style:E(t.colwidth?"width:"+t.colwidth+"px":"")},[e("div",be,V(t.alias),1),e("div",Ue,[e("div",ke,V(n.value),1)])],4)])])])):g("",!0)]),e("div",Le,[e("button",{class:"yp-button yp-button-orange rounded",type:"button",onClick:k},[je,y(" 提交 ")]),e("button",{class:"yp-button yp-button-gray rounded",type:"button",onClick:s[13]||(s[13]=l=>m("close"))},[Ce,y(" 返回 ")])])])):g("",!0)}}};export{Ne as default};
