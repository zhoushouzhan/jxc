import{a as j,r,o as D,d as c,e as d,i as t,t as n,F as B,q as R,k as v,l as L,g as U,z as E,D as F}from"./index-0f467f6d.js";const N={key:0,class:"p-5"},S={class:"text-center"},I={key:0,class:"text-xl px-2"},O={key:1,class:"text-xl px-2"},V={class:"flex justify-between px-3"},q={class:"flex items-center space-x-2"},z=t("div",null,"入库人：",-1),J={class:"flex items-center space-x-2"},M=t("div",null,"录入时间：",-1),T=t("div",{class:"pl-5"},"单号：",-1),$={class:"yp-table-p-2"},A=t("thead",null,[t("tr",null,[t("th",{class:"text-center w-20"},"序号"),t("th",{class:"w-32"},"图片"),t("th",null,"名称"),t("th",null,"条码"),t("th",null,"成本"),t("th",null,"零售价"),t("th",null,"数量"),t("th",null,"备注")])],-1),G={class:"text-center"},H=["src","onClick"],K=t("i",{class:"ri-arrow-go-back-fill ri-lg pr-1"},null,-1),P=t("i",{class:"ri-barcode-line ri-lg pr-1"},null,-1),W={__name:"view",props:{type:{default:1},id:{default:0}},emits:["jumpCom"],setup(u,{emit:x}){const p=u,y=x,h=j(!1),l=r({}),_=r([]);r(JSON.parse(sessionStorage.getItem("printBarcode"))||[]);const f=async s=>{const o=await U("kucundan/read",{id:s});if(o.code==1){for(let e in o.data)l[e]=o.data[e];l.bill.map((e,i)=>{_.push({id:e.goods_id,numbers:e.numbers})})}},w=()=>{y("jumpCom",{to:"list"})},g=s=>{window.open(s)},k=async()=>{E({text:"确定生成吗？"}).then(async()=>{let s=[];s=await F("goods/barcode",_);let o=new Blob([s.data]),e=s.headers["content-disposition"],m=new RegExp("filename=([^;]+\\.[^\\.;]+);*").exec(e),C=decodeURI(m[1]),a=document.createElement("a"),b=window.URL.createObjectURL(o);a.style.display="none",a.href=b,a.download=C,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(b),formData.length=0,sessionStorage.removeItem("printBarcode")}).catch(s=>{console.log("no",s)})};return D(async()=>{p.id&&await f(p.id),h.value=!0}),(s,o)=>h.value?(c(),d("div",N,[t("div",S,[u.type==1?(c(),d("div",I,"入库单查看")):(c(),d("div",O,"出库单查看"))]),t("div",null,[t("div",V,[t("div",q,[z,t("div",null,n(l.admin.truename),1)]),t("div",J,[M,t("div",null,n(l.create_time),1),T,t("div",null,n(l.sn),1)])]),t("div",null,[t("table",$,[A,t("tbody",null,[(c(!0),d(B,null,R(l.bill,(e,i)=>(c(),d("tr",null,[t("td",G,n(i+1),1),t("td",null,[t("img",{src:e.thumbFile,class:"w-32 h-32 object-cover",onClick:m=>g(e.thumbFile)},null,8,H)]),t("td",null,n(e.title),1),t("td",null,n(e.code),1),t("td",null," ￥"+n(e.inprice),1),t("td",null," ￥"+n(e.storeprice),1),t("td",null,n(e.numbers),1),t("td",null,n(e.intro),1)]))),256))])])])]),t("div",{class:"flex justify-center py-2 space-x-2 mt-3"},[t("button",{class:"yp-button yp-button-orange rounded",type:"button",onClick:w},[K,v(" 返回 ")]),t("button",{class:"yp-button yp-button-black rounded",onClick:k},[P,v(" 打印所有条码 ")])])])):L("",!0)}};export{W as default};
