import{u as R,a as U,r as x,w as A,o as F,b as k,c as H,d as n,v as q,h as v,i as t,m as f,f as y,e as a,F as z,q as O,t as l,l as i,k as S,g as G,y as V,z as J,E as K,A as Q}from"./index-ffc5c309.js";const W=t("i",{class:"ri-2x ri-database-2-line text-gray-500 ml-2"},null,-1),X=["innerHTML"],Y=t("div",{class:"flex-1 flex flex-row-reverse space-x-reverse space-x-2"},null,-1),Z={class:"flex space-x-3"},tt={class:"table-auto w-full text-sm"},et={class:"bg-gray-100"},st={class:"px-2 py-2 border w-10 font-thin"},ot=t("th",{class:"px-2 py-2 border w-10 text-center"},"ID",-1),nt=t("th",{class:"px-2 py-2 border w-44 text-center max-lg:hidden"},"单号",-1),at=t("th",{class:"px-2 py-2 border text-left"},"类型",-1),rt=t("th",{class:"px-2 py-2 border text-left"},"操作员",-1),dt=t("th",{class:"px-2 py-2 border w-32"},"库存",-1),lt=t("th",{class:"px-2 py-2 border w-32"},"状态",-1),ct=t("th",{class:"px-2 py-2 border w-44 max-lg:hidden"},"录入时间",-1),pt=t("th",{class:"px-2 py-2 border w-40 text-center"},"操作",-1),it={class:"border px-2"},ut={class:"border px-2 text-center"},mt={class:"border px-2 max-lg:hidden"},_t={class:"border px-2"},xt={key:0,class:"text-lime-600 bg-gray-100 px-2 py-[2px] rounded"},yt={key:1,class:"text-rose-500 bg-gray-100 px-2 py-[2px] rounded"},bt={class:"border px-2 space-x-2 text-sm"},ht={class:"border px-2 text-center"},gt={class:"border px-2 text-center"},kt={key:0,class:"bg-red-400 text-white px-2 py-[2px] rounded"},ft={key:1,class:"bg-green-700 text-white px-2 py-[2px] rounded"},Ct={class:"border px-2 max-lg:hidden"},wt={class:"border px-2 py-2 text-center"},vt=["onClick"],Vt=["onClick"],Dt=["onClick"],Pt=["onClick"],$t={class:"border p-2"},Lt={class:"border p-2",colspan:"8"},Tt={key:0,class:"mt-3"},Nt={__name:"list",props:{page:{default:0}},emits:["jumpCom"],setup(D,{emit:P}){const $=D,c=P,L=R().meta,T=U(!1),r=x({totalRecords:0,pageCount:0,currentPage:$.page}),j=e=>{r.currentPage=e,b()},_=x([]),d=x([]),u=x([]);A(u,(e,o)=>{d.length=0,e.length>0?_.forEach(p=>{d.push(p.id)}):d.length=0});const B=e=>{e.type==1&&c("jumpCom",{to:"in",id:e.id,page:r.currentPage}),e.type==2&&c("jumpCom",{to:"out",id:e.id,page:r.currentPage})},N=e=>{c("jumpCom",{to:"view",id:e,page:r.currentPage})},E=e=>{c("jumpCom",{to:"checkorder",id:e,page:r.currentPage})},b=async()=>{let e=await G("kucundan/index",{page:r.currentPage});if(e.code==1){r.currentPage=e.data.current_page,r.pageCount=e.data.last_page,r.totalRecords=e.data.total,_.length=0;for(let o in e.data.data)_[o]=e.data.data[o]}T.value=!0},C=e=>{if(e==0&&(e=d.length?d:0),!e){V({type:"alter-error",text:"请选择项目"});return}J({text:"确认删除吗？"}).then(async()=>{const o=await K("kucundan/delete",{ids:e});o.code&&(V({type:"alter-success",text:o.msg}),b())}).catch(o=>{})},w=e=>{const o=L.mod.name;return Q(o).indexOf(e)>=0};return F(()=>{b()}),(e,o)=>{const p=k("ypcheckbox"),I=k("yppage"),M=k("yplayout"),h=H("tooltip");return n(),q(M,null,{header:v(s=>[W,t("div",{class:"text-xl px-3",innerHTML:s.meta.title},null,8,X),Y,t("div",Z,[t("button",{class:"yp-button yp-button-sm yp-button rounded px-3",onClick:o[0]||(o[0]=g=>c("jumpCom",{to:"in"}))},"入库"),t("button",{class:"yp-button yp-button-sm yp-button-red rounded px-3",onClick:o[1]||(o[1]=g=>c("jumpCom",{to:"out"}))},"出库")])]),list:v(()=>[t("table",tt,[t("thead",et,[t("tr",null,[t("th",st,[f(y(p,{value:"all",modelValue:u,"onUpdate:modelValue":o[2]||(o[2]=s=>u=s)},null,8,["modelValue"]),[[h,"全选",void 0,{top:!0}]])]),ot,nt,at,rt,dt,lt,ct,pt])]),t("tbody",null,[(n(!0),a(z,null,O(_,(s,g)=>(n(),a("tr",{class:"hover:bg-gray-100",key:g},[t("td",it,[y(p,{value:s.id,modelValue:d,"onUpdate:modelValue":o[3]||(o[3]=m=>d=m)},null,8,["value","modelValue"])]),t("td",ut,l(s.id),1),t("td",mt,l(s.sn),1),t("td",_t,[s.type==1?(n(),a("span",xt,l(s.typeTip),1)):i("",!0),s.type==2?(n(),a("span",yt,l(s.typeTip),1)):i("",!0)]),t("td",bt,l(s.admin.truename||s.admin.username),1),t("td",ht,l(s.goodsCount),1),t("td",gt,[s.enabled==0?(n(),a("span",kt,"核验中")):(n(),a("span",ft,"己入库"))]),t("td",Ct,l(s.create_time),1),t("td",wt,[s.enabled==0?(n(),a("button",{key:0,class:"yp-button yp-button-sm rounded mr-2",onClick:m=>B(s)},"编辑",8,vt)):(n(),a("button",{key:1,class:"yp-button yp-button-sm rounded yp-button-green mr-2",onClick:m=>N(s.id)},"查看",8,Vt)),w("enabled")&&s.enabled==0?(n(),a("button",{key:2,class:"yp-button yp-button-sm rounded yp-button-black mr-2",onClick:m=>E(s.id)},"核验",8,Dt)):i("",!0),s.enabled==0?(n(),a("button",{key:3,class:"yp-button yp-button-red yp-button-sm rounded",onClick:m=>C(s.id)},"删除",8,Pt)):i("",!0)])]))),128))]),t("tfoot",null,[t("tr",null,[t("td",$t,[f(y(p,{value:"all",modelValue:u,"onUpdate:modelValue":o[4]||(o[4]=s=>u=s)},null,8,["modelValue"]),[[h,"全选",void 0,{right:!0}]])]),t("td",Lt,[w("delete")?f((n(),a("button",{key:0,class:"yp-button yp-button-red yp-button-sm rounded-sm",onClick:o[5]||(o[5]=s=>C(0))},[S("批量删除")])),[[h,"批量删除",void 0,{bottom:!0}]]):i("",!0)])])])]),r.pageCount>1?(n(),a("div",Tt,[y(I,{onTopage:j,pageData:r},null,8,["pageData"])])):i("",!0)]),_:1})}}};export{Nt as default};
