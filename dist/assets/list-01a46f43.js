import{a as j,r as p,w as E,o as I,b as y,c as M,d as a,v as U,h as v,i as t,m as g,f as u,e as r,F as $,q as F,t as _,l as m,k as H,g as R,y as C,z as q,E as z}from"./index-169137c2.js";const A=t("i",{class:"ri-2x ri-user-3-fill text-gray-500 ml-2"},null,-1),S=["innerHTML"],G=t("div",{class:"flex-1 flex flex-row-reverse space-x-reverse space-x-2"},null,-1),J={class:"table-auto w-full text-sm"},K={class:"bg-gray-100"},O={class:"px-2 py-2 border w-10 font-thin"},Q=t("th",{class:"px-2 py-2 border w-10 text-center"},"ID",-1),W=t("th",{class:"px-2 py-2 border text-left"},"姓名",-1),X=t("th",{class:"px-2 py-2 border text-left"},"性别",-1),Y=t("th",{class:"px-2 py-2 border w-44"},"联系电话",-1),Z=t("th",{class:"px-2 py-2 border w-44"},"备注",-1),tt=t("th",{class:"px-2 py-2 border w-32 text-center"},"操作",-1),et={class:"border px-2"},st={class:"border px-2 text-center"},ot={class:"border px-2"},at={class:"border px-2"},nt={key:0},lt={key:1},rt={key:2},dt={class:"border px-2 text-center"},ct={class:"border px-2 text-center"},it={class:"border px-2 py-2 text-center"},pt=["onClick"],ut=["onClick"],_t={class:"border p-2"},mt={class:"border p-2",colspan:"6"},ht={key:0,class:"mt-3"},yt={__name:"list",emits:["jumpCom"],setup(xt,{emit:V}){const f=V,w=j(!1),D=()=>{f("jumpCom",{to:"add"})},n=p({totalRecords:0,pageCount:0,currentPage:1}),L=e=>{n.currentPage=e,h()},i=p([]),l=p([]),d=p([]);E(d,(e,o)=>{l.length=0,e.length>0?i.forEach(c=>{l.push(c.id)}):l.length=0});const B=e=>{f("jumpCom",{to:"edit",id:e})},h=async()=>{let e=await R("member/index",{page:n.currentPage});if(e.code==1){n.currentPage=e.data.current_page,n.pageCount=e.data.last_page,n.totalRecords=e.data.total,i.length=0;for(let o in e.data.data)i[o]=e.data.data[o]}w.value=!0},k=e=>{if(e==0&&(e=l.length?l:0),!e){C({type:"alter-error",text:"请选择项目"});return}q({text:"确认删除吗？"}).then(async()=>{const o=await z("member/delete",{ids:e});o.code&&(C({type:"alter-success",text:o.msg}),h())}).catch(o=>{})};return I(()=>{h()}),(e,o)=>{const c=y("ypcheckbox"),N=y("yppage"),P=y("yplayout"),x=M("tooltip");return a(),U(P,null,{header:v(s=>[A,t("div",{class:"text-xl px-3",innerHTML:s.meta.title},null,8,S),G,t("button",{class:"yp-button yp-button-sm yp-button-purple rounded-sm",onClick:D},"增加")]),list:v(()=>[t("table",J,[t("thead",K,[t("tr",null,[t("th",O,[g(u(c,{value:"all",modelValue:d,"onUpdate:modelValue":o[0]||(o[0]=s=>d=s)},null,8,["modelValue"]),[[x,"全选",void 0,{top:!0}]])]),Q,W,X,Y,Z,tt])]),t("tbody",null,[(a(!0),r($,null,F(i,(s,T)=>(a(),r("tr",{class:"hover:bg-gray-100",key:T},[t("td",et,[u(c,{value:s.id,modelValue:l,"onUpdate:modelValue":o[1]||(o[1]=b=>l=b)},null,8,["value","modelValue"])]),t("td",st,_(s.id),1),t("td",ot,_(s.truename),1),t("td",at,[s.sex==1?(a(),r("span",nt,"男")):m("",!0),s.sex==2?(a(),r("span",lt,"女")):m("",!0),s.sex==3?(a(),r("span",rt,"保密")):m("",!0)]),t("td",dt,_(s.mobile),1),t("td",ct,_(s.intro),1),t("td",it,[t("button",{class:"yp-button yp-button-sm rounded-sm mr-2",onClick:b=>B(s.id)},"编辑",8,pt),t("button",{class:"yp-button yp-button-red yp-button-sm rounded-sm",onClick:b=>k(s.id)},"删除",8,ut)])]))),128))]),t("tfoot",null,[t("tr",null,[t("td",_t,[g(u(c,{value:"all",modelValue:d,"onUpdate:modelValue":o[2]||(o[2]=s=>d=s)},null,8,["modelValue"]),[[x,"全选",void 0,{right:!0}]])]),t("td",mt,[g((a(),r("button",{class:"yp-button yp-button-red yp-button-sm rounded-sm",onClick:o[3]||(o[3]=s=>k(0))},[H("批量删除")])),[[x,"批量删除",void 0,{bottom:!0}]])])])])]),n.pageCount>1?(a(),r("div",ht,[u(N,{onTopage:L,pageData:n},null,8,["pageData"])])):m("",!0)]),_:1})}}};export{yt as default};
