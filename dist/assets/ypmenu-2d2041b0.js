import{a as p,r as L,w as m,o as x,d as i,e as v,F as _,q as k,p as E,v as O,y as V}from"./index-ddd32adc.js";import B from"./menuItem-178a084d.js";const F={__name:"ypmenu",props:{dataList:{default:{}},modelValue:{default:""},value:{default:""}},emits:["update:modelValue"],setup(o,{emit:g}){const s=o,f=g,c=p(""),y=p(null),n=L([]),u=e=>{e.forEach(a=>{n.indexOf(a.id)>=0&&n.splice(n.indexOf(a.id),1),a.children&&a.children.length>0&&u(a.children)})},h=(e,a)=>{a.forEach(l=>{e==l.id?(n.splice(n.indexOf(e),1),l.children&&l.children.length>0&&u(l.children)):l.children&&l.children.length>0&&h(e,l.children)})};E("menu-switch",{opens:n,chitem:c,toggle:e=>{n.indexOf(e)>=0?h(e,s.dataList):n.push(e)},selected:e=>{c.value=e,f("update:modelValue",e)},noselect:e=>{V({type:"alter-error",text:e})}});const r=(e,a)=>{e&&a&&a.forEach(l=>{let t=!0;l.id==e&&(c.value=l,f("update:modelValue",l),l.pid&&d(l.pid,s.dataList),t=!1),l.children&&t&&r(e,l.children)})},d=(e,a)=>{e&&a.forEach(l=>{let t=!0;l.id==e&&(n.push(e),d(l.pid,s.dataList),t=!1),l.children&&t&&d(e,l.children)})};return m(s,e=>{r(e.value,e.dataList)}),x(()=>{r(s.value,s.dataList)}),(e,a)=>(i(),v("div",{class:"ypmenu",ref_key:"ypmenudom",ref:y},[(i(!0),v(_,null,k(o.dataList,(l,t)=>(i(),O(B,{list:l,key:t,leave:0},null,8,["list"]))),128))],512))}};export{F as default};
