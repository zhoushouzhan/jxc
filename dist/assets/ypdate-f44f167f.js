import{a as p,O as B,r as N,w as h,o as Y,d as o,e as n,m as z,R as E,i as d,l as y,t as i,F as x,q as m,K as j,g as q,n as w,k as I}from"./index-0f467f6d.js";const K=["placeholder"],O=d("i",{class:"ri-calendar-line absolute top-[11px] right-1 ri-xl text-gray-400"},null,-1),R={key:0,class:"w-[520px] bg-white absolute top-9 left-0 border shadow-md z-10 text-xs"},U={class:"flex justify-between py-3 px-3"},A={class:"flex"},G={key:0,class:"grid grid-cols-3 text-center p-1"},H=["onClick"],J={key:1,class:"grid grid-cols-3 text-center p-1"},P=["onClick"],Q={key:2,class:"grid grid-cols-7 text-center divide-x divide-y"},W=["onClick","title"],X={class:"text-xs absolute text-red-500 bottom-0"},Z={class:"border-t py-1 flex items-center pl-3 pr-1"},ee={class:"flex-1"},ae={__name:"ypdate",props:{modelValue:{type:String,default:""},placeholder:{type:String}},emits:["update:modelValue"],setup(C,{emit:V}){const D=C,f=V,k=p(D.modelValue);let r=new Date;const l=p(r.getFullYear()),a=p((r.getMonth()+1).toString().padStart(2,"0")),v=p(r.getDate()),g=p(!1),u=p("calendar"),M=B(()=>{let s=[];for(let t=0;t<15;t++)s.push(l.value-7+t);return s}),b=N({list:[]}),_=async s=>{const t=await q("/index/date",{ypdate:s});t.code==1&&(b.list=t.data)};h(k,s=>{f("update:modelValue",s)}),h(l,(s,t)=>{let e=s+"-"+a.value+"-"+v.value;_(e)}),h(a,(s,t)=>{let e=l.value+"-"+s+"-"+v.value;_(e)}),h(v,(s,t)=>{l.value+""+s+v.value,$()});const $=()=>{let s=l.value+"-"+a.value+"-"+v.value.toString().padStart(2,"0")+" ";k.value=s,f("update:modelValue",s),g.value=!1},F=()=>{a.value=parseInt(a.value)+1,a.value>12&&(l.value++,a.value=1),a.value=a.value.toString().padStart(2,"0")},L=()=>{a.value=a.value-1,a.value<=0&&(l.value--,a.value=12),a.value=a.value.toString().padStart(2,"0")},T=()=>{r=new Date,l.value=r.getFullYear(),a.value=(r.getMonth()+1).toString().padStart(2,"0"),v.value=r.getDate().toString().padStart(2,"0");let s=l.value+"-"+a.value+"-"+v.value+" ";f("update:modelValue",s),g.value=!1};return Y(()=>{window.addEventListener("click",()=>{g.value=!1});let s=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate();_(s)}),(s,t)=>(o(),n("div",{class:"relative",onClick:t[6]||(t[6]=j(()=>{},["stop"]))},[z(d("input",{type:"text",class:"yp-input","onUpdate:modelValue":t[0]||(t[0]=e=>k.value=e),onFocus:t[1]||(t[1]=e=>g.value=!0),placeholder:C.placeholder},null,40,K),[[E,k.value]]),O,g.value?(o(),n("div",R,[d("div",U,[d("div",{onClick:t[2]||(t[2]=e=>u.value=="calendar"?l.value=l.value-1:l.value=l.value-7)},"上一年"),u.value=="calendar"?(o(),n("div",{key:0,onClick:L},"上一月")):y("",!0),d("div",A,[d("div",{class:"px-1",onClick:t[3]||(t[3]=e=>u.value="year")},i(l.value)+"年",1),d("div",{class:"px-1",onClick:t[4]||(t[4]=e=>u.value="month")},i(a.value)+"月",1)]),u.value=="calendar"?(o(),n("div",{key:1,onClick:F},"下一月")):y("",!0),d("div",{onClick:t[5]||(t[5]=e=>u.value=="calendar"?l.value=l.value+1:l.value=l.value+7)},"下一年")]),u.value=="year"?(o(),n("div",G,[(o(!0),n(x,null,m(M.value,(e,c)=>(o(),n("div",{key:c,class:"py-3 hover:bg-gray-100",onClick:S=>(l.value=e,u.value="calendar")},i(e)+"年",9,H))),128))])):y("",!0),u.value=="month"?(o(),n("div",J,[(o(),n(x,null,m(12,(e,c)=>d("div",{key:c,class:"py-3 hover:bg-gray-100",onClick:S=>(a.value=e,u.value="calendar")},i(e)+"月",9,P)),64))])):y("",!0),u.value=="calendar"?(o(),n("div",Q,[(o(!0),n(x,null,m(b.list.week,(e,c)=>(o(),n("div",{key:c,class:w(["py-2 hover:bg-gray-200",c==0?"border-t":""])},i(e),3))),128)),(o(!0),n(x,null,m(b.list.day,(e,c)=>(o(),n("div",{key:c,class:w(["py-4 px-1 hover:bg-gray-200 relative",e.day==v.value&&e.month==a.value?"bg-orange-200":"",e.month==a.value?"bg-gray-100":""]),onClick:S=>(a.value=e.month,v.value=e.day),title:e.date},[I(i(e.day)+" ",1),d("div",X,i(e.holidays),1)],10,W))),128))])):y("",!0),d("div",Z,[d("div",ee,i(l.value)+"-"+i(a.value)+"-"+i(v.value),1),d("div",{class:"flex"},[d("button",{type:"button",class:"yp-button rounded-sm",onClick:T},"Today")])])])):y("",!0)]))}};export{ae as default};
